<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ubaid Lab</title>

  <!-- Google Font mirip KooBits -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Palet ala KooBits */
      --kb-blue-dark: #0069b8;
      --kb-blue: #00a4ff;
      --kb-blue-soft: #e3f5ff;
      --kb-blue-bg: #0a94df;
      --kb-yellow: #ffc928;
      --kb-yellow-dark: #f5a623;
      --kb-orange: #ff8a3d;
      --kb-green: #59c15b;

      --bg: #0288d1;
      --card: #ffffff;
      --text-main: #163148;
      --text-soft: #60758e;
      --muted: #8aa5c2;
      --error: #e63946;
      --success: #2ecc71;

      --radius-xl: 26px;
      --radius-lg: 20px;
      --radius-md: 14px;
      --shadow-soft: 0 16px 40px rgba(5, 61, 112, 0.35);
      --shadow-small: 0 8px 16px rgba(0, 0, 0, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Nunito", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh;
      background: radial-gradient(circle at top, #35b4ff 0, var(--kb-blue-bg) 45%, #01619b 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 18px;
      color: var(--text-main);
    }

    .app-shell {
      width: 100%;
      max-width: 1200px;
      background: linear-gradient(135deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
      border-radius: 32px;
      padding: 0;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(12px);
    }
.input-answer-row {
  display: none;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 10px;
}

.input-group {
  display: flex;
  flex-direction: column;
}

.input-group label {
  font-size: 12px;
  font-weight: 700;
  color: #1565c0;
  margin-bottom: 4px;
}

.input-group input {
  border-radius: 10px;
  padding: 8px 12px;
  border: 2px solid #e3f2fd;
  background: #f9fbff;
  outline: none;
  font-size: 13px;
  color: var(--text-main);
}

.input-group input:focus {
  border-color: #00a4ff;
  box-shadow: 0 0 0 1px rgba(33,150,243,0.4);
}

    /* Top bar ala KooBits */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 24px;
      background: #263238;
      color: #f5f5f5;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 34px;
      height: 34px;
      border-radius: 14px;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: #ff5252;
      font-weight: 800;
      box-shadow: 0 6px 12px rgba(0,0,0,0.25);
    }

    .brand-name {
      font-weight: 800;
      letter-spacing: 0.04em;
      font-size: 17px;
    }

    .top-nav {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 13px;
    }

    .top-nav span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      opacity: 0.8;
      cursor: default;
    }

    .top-nav span.active {
      opacity: 1;
      font-weight: 700;
    }

    .top-nav span.icon {
      font-size: 18px;
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 13px;
    }

    .streak-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 10px;
      border-radius: 999px;
      background: #ff7043;
      color: #fff;
      font-size: 12px;
    }

    .avatar-mini {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: #ff5252;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    /* Main content layout */
    .app-main {
      padding: 18px 22px 22px;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 18px;
      background: radial-gradient(circle at top, #3ab8ff 0, #0588d4 40%, #0367a4 100%);
    }

    /* Sidebar kiri: menu besar */
    .side-menu {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .profile-card {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      padding: 10px 12px;
      box-shadow: var(--shadow-small);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .profile-avatar {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: #ff7043;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: #fff;
      box-shadow: 0 6px 14px rgba(0,0,0,0.3);
    }

    .profile-info {
      flex: 1;
    }

    .profile-info h2 {
      font-size: 15px;
      font-weight: 800;
      margin-bottom: 2px;
    }

    .profile-info p {
      font-size: 11px;
      color: var(--text-soft);
    }

    .xp-badge {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      font-size: 11px;
      font-weight: 700;
      color: #1565c0;
    }

    .xp-main {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--kb-blue-soft);
    }

    .xp-main span.icon {
      font-size: 14px;
    }

    .xp-level {
      margin-top: 4px;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #00c853;
      color: #fff;
    }

    .side-tile {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      padding: 12px 14px;
      box-shadow: var(--shadow-small);
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: default;
    }

    .side-tile-icon {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: #fff;
      background: #ffb74d;
    }

    .side-tile:nth-child(2) .side-tile-icon { background: #ffb74d; }
    .side-tile:nth-child(3) .side-tile-icon { background: #4db6ac; }
    .side-tile:nth-child(4) .side-tile-icon { background: #ba68c8; }

    .side-tile-text {
      font-size: 13px;
      font-weight: 700;
      color: #263238;
    }

    .side-tile-sub {
      font-size: 11px;
      color: var(--muted);
    }

    /* Right main area */
    .main-col {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* Hero Daily Challenge */
    .hero-daily {
      background: #ffce32;
      border-radius: var(--radius-xl);
      padding: 14px 18px;
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .hero-daily::after {
      content: "";
      position: absolute;
      right: -40px;
      top: -30px;
      width: 160px;
      height: 160px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.25);
      opacity: 0.6;
    }

    .hero-text h1 {
      font-size: 22px;
      font-weight: 900;
      letter-spacing: 0.03em;
      color: #c05d00;
      margin-bottom: 4px;
    }

    .hero-text p {
      font-size: 13px;
      color: #8b5300;
    }

    .hero-meta {
      margin-top: 4px;
      font-size: 11px;
      color: #8b5300;
      opacity: 0.9;
    }

    .hero-action {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }

    .hero-trophy {
      font-size: 42px;
      filter: drop-shadow(0 4px 6px rgba(199, 125, 0, 0.5));
    }

    #startBtn {
      margin-top: 2px;
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 13px;
      font-weight: 800;
      cursor: pointer;
      background: linear-gradient(135deg, #ff8a3d, #ff5722);
      color: #fff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 18px rgba(204, 96, 0, 0.55);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    #startBtn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 12px 20px rgba(204, 96, 0, 0.7);
    }

    #startBtn:active {
      transform: translateY(0);
      box-shadow: 0 7px 14px rgba(204, 96, 0, 0.6);
    }

    /* Controls dropdown tampil simple seperti pill */
    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .controls-pill {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 999px;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: var(--shadow-small);
      font-size: 12px;
      color: var(--text-soft);
    }

    .controls-pill label {
      font-weight: 700;
      color: var(--text-main);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .controls-pill select {
      border: none;
      outline: none;
      background: transparent;
      font-size: 12px;
      color: var(--text-main);
      font-weight: 700;
      padding-right: 4px;
      cursor: pointer;
    }

    .controls-pill select option {
      color: #000;
    }

    /* Empty state & quiz card */
    .empty-state {
      margin-top: 10px;
      padding: 14px 16px;
      border-radius: var(--radius-lg);
      background: rgba(13, 71, 161, 0.95);
      color: #e3f2fd;
      font-size: 13px;
      display: flex;
      gap: 10px;
      align-items: center;
      box-shadow: var(--shadow-small);
    }

    .empty-state-icon {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.18);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    .quiz-card {
      margin-top: 10px;
      padding: 14px 16px 16px;
      border-radius: var(--radius-lg);
      background: #ffffff;
      box-shadow: var(--shadow-soft);
    }

    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .quiz-header-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .tag-row {
      display: flex;
      gap: 6px;
      font-size: 10px;
    }

    .tag-row span {
      padding: 2px 8px;
      border-radius: 999px;
      background: #e3f5ff;
      color: #1565c0;
      font-weight: 700;
    }

    .tag-row span.category {
      background: #ffecb3;
      color: #f57c00;
    }

    .quiz-header h2 {
      font-size: 14px;
      font-weight: 800;
      color: var(--text-main);
    }

    .score-pill {
      font-size: 11px;
      border-radius: 999px;
      background: #ffecb3;
      padding: 5px 10px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #c05d00;
      font-weight: 800;
    }

    .score-pill span.icon {
      font-size: 14px;
    }

    /* Progress */
    .progress-wrapper {
      margin-bottom: 10px;
    }

    .progress-label-row {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    .progress-bar {
      width: 100%;
      height: 9px;
      border-radius: 999px;
      background: #e3f2fd;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #00c853, #ffd600);
      border-radius: inherit;
      transition: width 0.25s ease-out;
    }

    /* Question text & options */
    .question-text {
      font-size: 15px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 10px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 10px;
    }

    .option-btn {
      border-radius: var(--radius-md);
      padding: 9px 11px;
      border: 2px solid transparent;
      background: #f9fbff;
      color: var(--text-main);
      font-size: 13px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease, background 0.12s ease;
      box-shadow: 0 3px 6px rgba(13, 71, 161, 0.12);
    }

    .option-btn span.option-label {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: #00a4ff;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 12px;
      flex-shrink: 0;
    }

    .option-btn span.option-text {
      flex: 1;
    }

    .option-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 10px rgba(13, 71, 161, 0.25);
      border-color: #00a4ff;
      background: #ffffff;
    }

    .option-btn.correct {
      border-color: #2ecc71;
      background: #e8f9f0;
    }

    .option-btn.wrong {
      border-color: #e53935;
      background: #ffebee;
    }

    .option-btn:disabled {
      cursor: default;
      transform: none;
      box-shadow: none;
    }

    /* Input answer (1 atau 3 kolom) */
    .input-answer-row {
      display: none;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 10px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .input-group label {
      font-size: 12px;
      font-weight: 700;
      color: #1565c0;
    }

    .input-group input {
      border-radius: 10px;
      padding: 8px 12px;
      border: 2px solid #e3f2fd;
      background: #f9fbff;
      outline: none;
      font-size: 13px;
      color: var(--text-main);
    }

    .input-group input:focus {
      border-color: #00a4ff;
      box-shadow: 0 0 0 1px rgba(33,150,243,0.4);
    }

    #checkInputBtn {
      align-self: flex-start;
      border-radius: 999px;
      border: none;
      padding: 9px 14px;
      font-size: 12px;
      font-weight: 800;
      background: #00c853;
      color: #fff;
      box-shadow: 0 4px 8px rgba(0, 200, 83, 0.4);
      cursor: pointer;
    }

    #checkInputBtn:disabled {
      opacity: 0.7;
      box-shadow: none;
      cursor: default;
    }

    /* Feedback & bottom actions */
    .feedback-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
      margin-top: 4px;
    }

    .feedback {
      font-size: 12px;
      min-height: 18px;
    }

    .feedback.correct {
      color: var(--success);
      font-weight: 600;
    }

    .feedback.wrong {
      color: var(--error);
      font-weight: 600;
    }

    .bottom-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    button.secondary {
      border-radius: 999px;
      padding: 7px 12px;
      font-size: 12px;
      font-weight: 700;
      border: none;
      background: #e3f2fd;
      color: #1565c0;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 3px 6px rgba(13, 71, 161, 0.18);
    }

    button.secondary.outline {
      background: #ffffff;
      border: 1px dashed #bbdefb;
      box-shadow: none;
      color: #607d8b;
    }

    button.secondary:hover {
      background: #bbdefb;
    }

    button.secondary:disabled {
      opacity: 0.7;
      box-shadow: none;
      cursor: default;
    }

    /* Result card */
    .result-card {
      margin-top: 10px;
      padding: 16px 16px 16px;
      border-radius: var(--radius-lg);
      background: linear-gradient(135deg, #66bb6a, #aed581);
      color: #1b5e20;
      box-shadow: var(--shadow-soft);
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
      align-items: center;
    }

    .result-main h2 {
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 900;
    }

    .result-main h2 span.icon {
      font-size: 26px;
    }

    .result-main p {
      font-size: 13px;
      color: #234d20;
    }

    .result-score {
      text-align: right;
      font-size: 13px;
      color: #1b5e20;
      font-weight: 700;
    }

    .result-score strong {
      font-size: 20px;
    }

    .result-details {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
      font-size: 11px;
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 700;
    }

    .chip span.icon {
      font-size: 14px;
    }

    .result-actions {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .app-main {
        grid-template-columns: 1fr;
      }
      .side-menu {
        order: 2;
      }
      .main-col {
        order: 1;
      }
    }

.question-image {
  margin: 6px 0 10px;
  display: none;          /* default: disembunyikan kalau nggak ada gambar */
  text-align: center;
}

.question-image img {
  max-width: 100%;
  max-height: 220px;
  border-radius: 14px;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
  background: #ffffff;
}

    @media (max-width: 640px) {
      body {
        padding: 10px;
      }
      .app-shell {
        border-radius: 20px;
      }
      .top-bar {
        flex-wrap: wrap;
        gap: 8px;
        padding-inline: 14px;
      }
      .app-main {
        padding: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- TOP BAR -->
    <header class="top-bar">
      <div class="brand">
        <div class="brand-logo">U</div>
        <div class="brand-name">UbaidBits</div>
      </div>
      <nav class="top-nav">
        <span class="active">üè† Home</span>
        <span>üìä Report</span>
        <span>üèÜ Leaderboard</span>
      </nav>
      <div class="top-right">
        <div class="streak-pill">üî• 7-day streak</div>
        <div class="avatar-mini">ü¶ñ</div>
      </div>
    </header>

    <main class="app-main">
      <!-- SIDEBAR LEFT -->
      <aside class="side-menu">
        <section class="profile-card">
          <div class="profile-avatar">ü§ñ</div>
          <div class="profile-info">
            <h2>Ubaid Badzil Azkandrias</h2>
            <p>Grade 6 ‚Ä¢ Daily Practice</p>
          </div>
          <div class="xp-badge">
            <div class="xp-main">
              <span class="icon">‚≠ê</span>
              <span id="topScore">0 XP</span>
            </div>
            <div class="xp-level">Lv. 6</div>
          </div>
        </section>

        <div class="side-tile">
          <div class="side-tile-icon">üß†</div>
          <div>
            <div class="side-tile-text">Brain Games</div>
            <div class="side-tile-sub">Asah otak sebelum latihan</div>
          </div>
        </div>
        <div class="side-tile">
          <div class="side-tile-icon">üìÖ</div>
          <div>
            <div class="side-tile-text">Events</div>
            <div class="side-tile-sub">Target belajar mingguan</div>
          </div>
        </div>
        <div class="side-tile">
          <div class="side-tile-icon">üìñ</div>
          <div>
            <div class="side-tile-text">Story</div>
            <div class="side-tile-sub">Cerita matematika seru</div>
          </div>
        </div>
      </aside>

      <!-- MAIN COLUMN -->
      <section class="main-col">
        <!-- HERO -->
        <section class="hero-daily">
          <div class="hero-text">
            <h1>Pearson Mock Year 6</h1>
            <p>Special practice for Ubaid before Pearson Mock Test I.</p>
            <div class="hero-meta">
              Select the subject & number of questions below, then press
              <strong>Start</strong>.
            </div>
          </div>
          <div class="hero-action">
            <div class="hero-trophy">üèÜ</div>
            <button id="startBtn">
              Start
              <span>‚ö°</span>
            </button>
          </div>
        </section>

        <!-- CONTROL PILLS -->
        <section class="controls-row" style="margin-top: 6px;">
          <div class="controls-pill">
            <label for="categorySelect">Subject</label>
            <select id="categorySelect">
              <option value="mix">Mix</option>
              <option value="math">Math</option>
              <option value="science">Science</option>
              <option value="english">English</option>
            </select>
          </div>

          <div class="controls-pill">
            <label for="questionCountSelect">Questions</label>
            <select id="questionCountSelect">
              <option value="5">5 (Quick)</option>
              <option value="10" selected>10 (Standard)</option>
              <option value="15">15 (Challenge)</option>
            </select>
          </div>
        </section>

        <!-- CONTENT AREA -->
        <section id="contentArea">
          <div class="empty-state" id="emptyState">
            <div class="empty-state-icon">‚ú®</div>
            <div>
              <strong>Pray before you start.</strong><br />
              Pilih subject & jumlah soal, lalu tekan tombol
              <strong>Start</strong> di kartu kuning di atas.
            </div>
          </div>

          <!-- QUIZ CARD -->
          <section class="quiz-card" id="quizCard" style="display:none;">
            <div class="quiz-header">
              <div class="quiz-header-left">
                <div class="tag-row">
                  <span id="categoryTag" class="category">Math</span>
                  <span id="questionTag">Question 1 of 10</span>
                </div>
                <h2 id="quizTitle">Kerjakan soal berikut dengan teliti ya, Ubaid! üí™</h2>
              </div>
              <div class="score-pill">
                <span class="icon">‚≠ê</span>
                <span>Score: <span id="scoreDisplay">0</span></span>
              </div>
            </div>

            <div class="progress-wrapper">
              <div class="progress-label-row">
                <span id="progressLabel">0% complete</span>
                <span id="answeredLabel">0 answered</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>

            <div class="question-text" id="questionText"></div>
 
            <div class="question-image" id="questionImageContainer"></div>

            <div class="options" id="optionsContainer"></div>

            <!-- INPUT (1 atau 3 kolom) -->
            <div class="input-answer-row" id="inputContainer">
              <div class="input-group" id="group1">
                <label id="label1">Jawaban</label>
                <input type="text" id="input1" autocomplete="off" />
              </div>
              <div class="input-group" id="group2">
                <label id="label2">Y</label>
                <input type="text" id="input2" autocomplete="off" />
              </div>
              <div class="input-group" id="group3">
                <label id="label3">Z</label>
                <input type="text" id="input3" autocomplete="off" />
              </div>

              <button id="checkInputBtn">Cek ‚úÖ</button>
            </div>

            <div class="feedback-row">
              <div class="feedback" id="feedback"></div>
              <div class="bottom-actions">
                <button class="secondary outline" id="skipBtn">Lewati ‚è≠Ô∏è</button>
                <button class="secondary" id="nextBtn" disabled>Berikutnya ‚ûú</button>
              </div>
            </div>
          </section>


          <!-- RESULT CARD -->
          <section class="result-card" id="resultCard" style="display:none;">
            <div class="result-header">
              <div class="result-main">
                <h2>
                  <span class="icon" id="emojiResult">üèÜ</span>
                  <span id="resultTitle">Keren, Ubaid!</span>
                </h2>
                <p id="resultMessage">
                  Kamu sudah menyelesaikan semua soal. Lihat skor dan ulangi kalau mau naik level lagi.
                </p>
              </div>
              <div class="result-score">
                Total Score<br />
                <strong><span id="resultScore">0</span></strong>
                <span style="font-size:12px;">/ <span id="resultMaxScore">10</span></span>
              </div>
            </div>

            <div class="result-details">
              <div class="chip">
                <span class="icon">‚úÖ</span>
                Benar:
                <span id="resultCorrect">0</span>
              </div>
              <div class="chip">
                <span class="icon">‚ùå</span>
                Salah:
                <span id="resultWrong">0</span>
              </div>
              <div class="chip">
                <span class="icon">‚è≠Ô∏è</span>
                Dilewati:
                <span id="resultSkipped">0</span>
              </div>
              <div class="chip">
                <span class="icon">üìä</span>
                Persentase:
                <span id="resultPercent">0%</span>
              </div>
            </div>

            <div class="result-actions">
              <button class="secondary outline" id="backToStartBtn">
                üîÅ Kembali ke Daily Challenge
              </button>
              <button class="secondary" id="retryBtn">
                üîÑ Ulangi sesi ini
              </button>
            </div>
          </section>
        </section>
      </section>
    </main>
  </div>

  <script>
    // ==============================
    // BANK SOAL
    // type: "choice" = pilihan ganda
    // type: "input"  = jawaban diketik
    // ==============================
    const questionBank = {
      math: [
        {
          type: "choice",
          question: "Pick the prime number",
          options: ["4", "7", "8", "9"],
          answerIndex: 1,
          explanation: "Bilangan prima adalah bilangan yang hanya bisa dibagi 1 dan dirinya sendiri"
        },
        {
          type: "choice",
          question: "Which shape has one pair of parallel sides?",
          options: ["Square", "Trapezium", "Rhombus", "Triangle"],
          answerIndex: 1,
          explanation: ""
        },
        {
          type: "input",
          question: "Area of triangle with base 10 cm and height 6 cm = .... cm¬≤",
          correctAnswers: ["30"],
          explanation: "Rumus luas segitiga: 1/2 x alas x tinggi. Diketahui: Alas = 10 cm, Tinggi = 6 cm. Hitung: 1/2 x 10 x 6 = 30"
        },
        {
          type: "input",
          question: "Perimeter of rectangle 6 cm x 4 cm = .... cm",
          correctAnswers: ["20"],
          explanation: "Rumus keliling persegi panjang: 2 x (panjang + lebar). 2 x (6+4) = 2 x 10 = 20"
        },
        {
          type: "input",
          question: "1,5 km = .... m",
          correctAnswers: ["1500", "1.500"],
          explanation: "Konversi kilometer ke meter: 1 km = 1000 m. Maka: 1,5 km = 1,5 x 1000 = 1500 m"
        },
        {
          type: "input",
          question: "Find the value of 4(2b + 3) when b=5",
          correctAnswers: ["52"],
          explanation: "Hitung bagian dalam kurung: 2(5) + 3 = 10 + 3 = 13. Kalikan dengan 4: 4 x 13 = 52"
        },
        {
          type: "input",
          question: "Convert 1 hour 15 minutes = .... minutes",
          correctAnswers: ["75"],
          explanation: ""
        },
        {
          type: "input",
          question: "A square has a side of 9cm. Its area = .... cm¬≤",
          correctAnswers: ["81"],
          explanation: "Rumus luas persegi: sisi x sisi = 9 x 9 = 81"
        },
        {
          type: "input",
          question: "Radius = 7 cm. Diameter = .... cm",
          correctAnswers: ["14"],
          explanation: "Diameter = 2 x jari-jari (radius) = 2 x 7 = 14"
        },  
        {
          type: "input",
          question: "Mean of 4, 8, 6, 10 = ....",
          correctAnswers: ["7"],
          explanation: "Untuk mencari mean (rata-rata) dari 4, 8, 6, 10. Jumlahkan semua angkanya: 4 + 8 + 6 + 10 = 28. Bagi dengan jumlah data (4 angka): 28 √∑ 4 = 7"
        }, 
        {
          type: "input",
          question: "Range of 12, 5, 8, 11 = ....",
          correctAnswers: ["7"],
          explanation: "Untuk mencari range, gunakan rumus: range = nilai terbesar - nilai terkecil = 12 - 5 = 7"
        },     
        {
          type: "input",
          question: "Round 3.726",
          correctAnswers: ["3.800", "3800", "3,800"],
          explanation: ""
        },
        {
          type: "input",
          question: "Increase 100 by 25% =",
          correctAnswers: ["125"],
          explanation: "Cari 25% dari 100, 25% x 100 = 25. Tambahkan ke 100, 100 + 25 = 125"
        },
        {
          type: "input",
          question: "Ubaid spends 2/5 of his pocket money on snacks. How much is left?",
          correctAnswers: ["3/5"],
          explanation: "Ubaid menghabiskan 2/5 dari uang sakunya untuk membeli snack. Berapa bagian yang tersisa? Total uang saku = 1 (utuh). Bagian yang dipakai = 2/5. jadi yang tersisa 1 - 2/5 = 5/5 - 2/5 = 3/5"
        }, 
        {
          type: "input",
          question: "Convert 4/10 to a decimal",
          correctAnswers: ["0,4", "0.4"],
          explanation: "4 √∑ 10 = 0,4"
        },              
        {
          type: "input",
          question: "Find 50% of 240 =",
          correctAnswers: ["120"],
          explanation: ""
        },
        {
          type: "input",
          question: "0,6 as a fraction",
          correctAnswers: ["6/10", "3/5"],
          explanation: ""
        },
        {
          type: "input",
          question: "The next two term in this pattern : 3, 6, 12, 24, ... , ...",
          correctAnswers: ["48, 96", "48,96"],
          explanation: ""
        },
        {
          type: "input",
          question: "2/3 x 3/5 = ... ",
          correctAnswers: ["6/15", "2/5"],
          explanation: "Kalikan pecahan dengan mengalikan pembilang dan penyebut"
        },        
        {
          type: "input",
          question: "3/4 + 1/8 = ... ",
          correctAnswers: ["7/8"],
          explanation: ""
        },
        {
          type: "input",
          question: "Simplify 6/9",
          correctAnswers: ["2/3"],
          explanation: "Faktor persekutuan terbesar dari 6 dan 9 adalah 3. 6 √∑ 3 = 2, 9 √∑ 3 = 3 jadi 6/9 = 2/3"
        },
        {
          type: "input",
          question: "Write all factors of 20",
          correctAnswers: ["1, 2, 4, 5, 10, 20", "1,2,4,5,10,20"],
          explanation: "Faktor adalah bilangan yang dapat membagi suatu bilangan tanpa sisa"
        },
        {
          type: "input",
          question: "720 : 8 = .....",
          correctAnswers: ["90"],
          explanation: ""
        },
        {
          type: "input",
          question: "900 - 475 = .....",
          correctAnswers: ["425"],
          explanation: ""
        }, 
        {
          type: "input",
          question: "36 x 7 = .....",
          correctAnswers: ["252"],
          explanation: ""
        },
        {
  type: "input",
  question: "Perimeter of rectangle 7 cm x 3 cm = .... cm",
  correctAnswers: ["20"],
  explanation: "Keliling = 2 √ó (panjang + lebar)"
},
{
  type: "input",
  question: "Perimeter of rectangle 10 cm x 4 cm = .... cm",
  correctAnswers: ["28"],
  explanation: "Keliling = 2 √ó (panjang + lebar)"
},
{
  type: "input",
  question: "Perimeter of rectangle 5 cm x 9 cm = .... cm",
  correctAnswers: ["28"],
  explanation: "Keliling = 2 √ó (panjang + lebar)"
},
{
  type: "input",
  question: "Perimeter of rectangle 12 cm x 6 cm = .... cm",
  correctAnswers: ["36"],
  explanation: "Keliling = 2 √ó (panjang + lebar)"
},
{
  type: "input",
  question: "2 km = .... m",
  correctAnswers: ["2000"],
  explanation: "1 km = 1000 meter"
},
{
  type: "input",
  question: "0.8 km = .... m",
  correctAnswers: ["800"],
  explanation: "Kalikan km √ó 1000"
},
{
  type: "input",
  question: "1.2 km = .... m",
  correctAnswers: ["1200"],
  explanation: "Kalikan km √ó 1000"
},
{
  type: "input",
  question: "3.5 km = .... m",
  correctAnswers: ["3500"],
  explanation: "Kalikan km √ó 1000"
},
{
  type: "input",
  question: "Find the value of 4(2b + 3) when b=3",
  correctAnswers: ["36"],
  explanation: "Substitusikan nilai b lalu hitung"
},
{
  type: "input",
  question: "Find the value of 4(2b + 5) when b=4",
  correctAnswers: ["52"],
  explanation: "Substitusikan nilai b lalu hitung"
},
{
  type: "input",
  question: "Find the value of 5(3b + 2) when b=2",
  correctAnswers: ["40"],
  explanation: "Substitusikan nilai b lalu hitung"
},
{
  type: "input",
  question: "Find the value of 6(b + 4) when b=3",
  correctAnswers: ["42"],
  explanation: "Substitusikan nilai b lalu hitung"
},
{
  type: "input",
  question: "Convert 1 hour 20 minutes = .... minutes",
  correctAnswers: ["80"],
  explanation: "1 jam = 60 menit"
},
{
  type: "input",
  question: "Convert 2 hours 15 minutes = .... minutes",
  correctAnswers: ["135"],
  explanation: "Jam √ó 60 lalu tambah menit"
},
{
  type: "input",
  question: "Convert 3 hours 5 minutes = .... minutes",
  correctAnswers: ["185"],
  explanation: "Jam √ó 60 lalu tambah menit"
},
{
  type: "input",
  question: "Convert 0 hours 45 minutes = .... minutes",
  correctAnswers: ["45"],
  explanation: "0 √ó 60 + 45"
},
{
  type: "input",
  question: "A square has side 5 cm. Its area = .... cm¬≤",
  correctAnswers: ["25"],
  explanation: "Luas = sisi √ó sisi"
},
{
  type: "input",
  question: "A square has side 11 cm. Its area = .... cm¬≤",
  correctAnswers: ["121"],
  explanation: "Luas = sisi √ó sisi"
},
{
  type: "input",
  question: "A square has side 4 cm. Its area = .... cm¬≤",
  correctAnswers: ["16"],
  explanation: "Luas = sisi √ó sisi"
},
{
  type: "input",
  question: "A square has side 15 cm. Its area = .... cm¬≤",
  correctAnswers: ["225"],
  explanation: "Luas = sisi √ó sisi"
},
{
  type: "input",
  question: "Radius = 5 cm. Diameter = .... cm",
  correctAnswers: ["10"],
  explanation: "Diameter = 2 √ó radius"
},
{
  type: "input",
  question: "Radius = 9 cm. Diameter = .... cm",
  correctAnswers: ["18"],
  explanation: "Diameter = 2 √ó radius"
},
{
  type: "input",
  question: "Radius = 12 cm. Diameter = .... cm",
  correctAnswers: ["24"],
  explanation: "Diameter = 2 √ó radius"
},
{
  type: "input",
  question: "Radius = 3 cm. Diameter = .... cm",
  correctAnswers: ["6"],
  explanation: "Diameter = 2 √ó radius"
},
{
  type: "input",
  question: "Mean of 6, 8, 10, 6 = ....",
  correctAnswers: ["7.5"],
  explanation: "Jumlahkan semua lalu bagi banyak data"
},
{
  type: "input",
  question: "Mean of 3, 9, 12, 6 = ....",
  correctAnswers: ["7.5"],
  explanation: "Jumlahkan semua lalu bagi banyak data"
},
{
  type: "input",
  question: "Mean of 5, 7, 9, 11 = ....",
  correctAnswers: ["8"],
  explanation: "Jumlahkan semua lalu bagi banyak data"
},
{
  type: "input",
  question: "Mean of 2, 4, 6, 8 = ....",
  correctAnswers: ["5"],
  explanation: "Jumlahkan semua lalu bagi banyak data"
},
{
  type: "input",
  question: "Range of 10, 3, 7, 2 = ....",
  correctAnswers: ["8"],
  explanation: "Range = terbesar - terkecil"
},
{
  type: "input",
  question: "Range of 15, 9, 12, 6 = ....",
  correctAnswers: ["9"],
  explanation: "Range = terbesar - terkecil"
},
{
  type: "input",
  question: "Range of 20, 5, 8, 11 = ....",
  correctAnswers: ["15"],
  explanation: "Range = terbesar - terkecil"
},
{
  type: "input",
  question: "Range of 18, 14, 3, 9 = ....",
  correctAnswers: ["15"],
  explanation: "Range = terbesar - terkecil"
},
{
  type: "input",
  question: "Round 5.382 to the nearest hundred",
  correctAnswers: ["5.400", "5400", "5,400"],
  explanation: ""
},
{
  type: "input",
  question: "Round 7.629 to the nearest hundred",
  correctAnswers: ["7.600", "7600"],
  explanation: ""
},
{
  type: "input",
  question: "Round 2.120 to the nearest hundred",
  correctAnswers: ["2.000", "2000"],
  explanation: ""
},
{
  type: "input",
  question: "Round 4.510 to the nearest hundred",
  correctAnswers: ["4500", "4.500"],
  explanation: ""
},
{
  type: "input",
  question: "Ubaid spends 1/4 of his pocket money. How much is left?",
  correctAnswers: ["3/4"],
  explanation: "1 - 1/4 = 3/4"
},
{
  type: "input",
  question: "Ubaid spends 3/8 of his money. How much is left?",
  correctAnswers: ["5/8"],
  explanation: "1 - 3/8 = 5/8"
},
{
  type: "input",
  question: "Ubaid spends 1/2 of his money. How much is left?",
  correctAnswers: ["1/2"],
  explanation: "1 - 1/2 = 1/2"
},
{
  type: "input",
  question: "Ubaid spends 2/7 of his money. How much is left?",
  correctAnswers: ["5/7"],
  explanation: "1 - 2/7 = 5/7"
},
{
  type: "input",
  question: "Convert 2/10 to a decimal",
  correctAnswers: ["0.2"],
  explanation: "Pembilang √∑ penyebut"
},
{
  type: "input",
  question: "Convert 8/10 to a decimal",
  correctAnswers: ["0.8"],
  explanation: "Pembilang √∑ penyebut"
},
{
  type: "input",
  question: "Convert 9/10 to a decimal",
  correctAnswers: ["0.0"],
  explanation: "Pembilang √∑ penyebut"
},
{
  type: "input",
  question: "Convert 7/10 to a decimal",
  correctAnswers: ["0.7"],
  explanation: "Pembilang √∑ penyebut"
},
{
  type: "input",
  question: "Find 50% of 300",
  correctAnswers: ["150"],
  explanation: "50% adalah setengah"
},
{
  type: "input",
  question: "Find 50% of 120",
  correctAnswers: ["60"],
  explanation: "50% adalah setengah"
},
{
  type: "input",
  question: "Find 50% of 80",
  correctAnswers: ["40"],
  explanation: "50% adalah setengah"
},
{
  type: "input",
  question: "Find 50% of 500",
  correctAnswers: ["250"],
  explanation: "50% adalah setengah"
},
{
  type: "input",
  question: "0.8 as a fraction = ....",
  correctAnswers: ["8/10"],
  explanation: ""
},
{
  type: "input",
  question: "0.4 as a fraction = ....",
  correctAnswers: ["4/10"],
  explanation: ""
},
{
  type: "input",
  question: "0.2 as a fraction = ....",
  correctAnswers: ["2/10"],
  explanation: ""
},
{
  type: "input",
  question: "The next two terms in this pattern: 2, 4, 8, 16, ... , ...",
  correctAnswers: ["32", "64"],
  explanation: "Dikalikan 2 setiap langkah"
},
{
  type: "input",
  question: "The next two terms: 5, 10, 20, 40, ... , ...",
  correctAnswers: ["80", "160"],
  explanation: "Dikalikan 2 setiap langkah"
},
{
  type: "input",
  question: "The next two terms: 1, 3, 9, 27, ... , ...",
  correctAnswers: ["81", "243"],
  explanation: "Dikalikan 3 setiap langkah"
},
{
  type: "input",
  question: "The next two terms: 4, 8, 16, 32, ... , ...",
  correctAnswers: ["64", "128"],
  explanation: "Dikalikan 2 setiap langkah"
},
{
  type: "input",
  question: "2/3 √ó 4/5 = ...",
  correctAnswers: ["8/15"],
  explanation: "Kalikan pembilang dan penyebut"
},
{
  type: "input",
  question: "3/4 √ó 2/7 = ...",
  correctAnswers: ["6/28", "3/14"],
  explanation: "Kalikan pembilang dan penyebut lalu sederhanakan"
},
{
  type: "input",
  question: "5/6 √ó 1/3 = ...",
  correctAnswers: ["5/18"],
  explanation: "Kalikan pembilang dan penyebut"
},
{
  type: "input",
  question: "7/8 √ó 2/5 = ...",
  correctAnswers: ["14/40", "7/20"],
  explanation: "Sederhanakan jika perlu"
},
{
  type: "input",
  question: "3/4 + 1/6 = ...",
  correctAnswers: ["11/12"],
  explanation: "Samakan penyebut"
},
{
  type: "input",
  question: "1/2 + 1/8 = ...",
  correctAnswers: ["5/8"],
  explanation: "Samakan penyebut"
},
{
  type: "input",
  question: "2/5 + 1/10 = ...",
  correctAnswers: ["5/10", "1/2"],
  explanation: "Samakan penyebut"
},
{
  type: "input",
  question: "5/6 + 1/3 = ...",
  correctAnswers: ["7/6", "1 1/6"],
  explanation: "Samakan penyebut"
},
{
  type: "input",
  question: "Simplify 8/12",
  correctAnswers: ["2/3"],
  explanation: "Bagi pembilang dan penyebut dengan FPB"
},
{
  type: "input",
  question: "Simplify 9/15",
  correctAnswers: ["3/5"],
  explanation: "Bagi pembilang dan penyebut dengan FPB"
},
{
  type: "input",
  question: "Simplify 12/20",
  correctAnswers: ["3/5"],
  explanation: "Bagi pembilang dan penyebut dengan FPB"
},
{
  type: "input",
  question: "Simplify 14/21",
  correctAnswers: ["2/3"],
  explanation: "Bagi pembilang dan penyebut dengan FPB"
},
{
  type: "input",
  question: "Write all factors of 18",
  correctAnswers: ["1,2,3,6,9,18"],
  explanation: "Bilangan yang membagi habis 18"
},
{
  type: "input",
  question: "Write all factors of 12",
  correctAnswers: ["1,2,3,4,6,12"],
  explanation: "Bilangan yang membagi habis 12"
},
{
  type: "input",
  question: "Write all factors of 16",
  correctAnswers: ["1,2,4,8,16"],
  explanation: "Bilangan yang membagi habis 16"
},
{
  type: "input",
  question: "Write all factors of 24",
  correctAnswers: ["1,2,3,4,6,8,12,24"],
  explanation: "Bilangan yang membagi habis 24"
},
{
  type: "input",
  question: "720 : 6 = .....",
  correctAnswers: ["120"],
  explanation: "720 dibagi 6"
},
{
  type: "input",
  question: "800 : 8 = .....",
  correctAnswers: ["100"],
  explanation: "800 dibagi 8"
},
{
  type: "input",
  question: "450 : 9 = .....",
  correctAnswers: ["50"],
  explanation: "450 dibagi 9"
},
{
  type: "input",
  question: "600 : 4 = .....",
  correctAnswers: ["150"],
  explanation: "600 dibagi 4"
},
{
  type: "input",
  question: "900 - 350 = .....",
  correctAnswers: ["550"],
  explanation: "Kurangkan"
},
{
  type: "input",
  question: "700 - 275 = .....",
  correctAnswers: ["425"],
  explanation: "Kurangkan"
},
{
  type: "input",
  question: "650 - 180 = .....",
  correctAnswers: ["470"],
  explanation: "Kurangkan"
},
{
  type: "input",
  question: "1200 - 725 = .....",
  correctAnswers: ["475"],
  explanation: "Kurangkan"
},
{
  type: "input",
  question: "36 √ó 5 = .....",
  correctAnswers: ["180"],
  explanation: "Perkalian"
},
{
  type: "input",
  question: "24 √ó 7 = .....",
  correctAnswers: ["168"],
  explanation: "Perkalian"
},
{
  type: "input",
  question: "15 √ó 9 = .....",
  correctAnswers: ["135"],
  explanation: "Perkalian"
},
{
  type: "input",
  question: "48 √ó 6 = .....",
  correctAnswers: ["288"],
  explanation: "Perkalian"
},
        {
  type: "input",
  question: "Area of triangle with base 8 cm and height 5 cm = .... cm¬≤",
  correctAnswers: ["20"],
  explanation: "Luas = 1/2 √ó alas √ó tinggi"
},
{
  type: "input",
  question: "Area of triangle with base 12 cm and height 7 cm = .... cm¬≤",
  correctAnswers: ["42"],
  explanation: "Luas = 1/2 √ó alas √ó tinggi"
},
{
  type: "input",
  question: "Area of triangle with base 9 cm and height 10 cm = .... cm¬≤",
  correctAnswers: ["45"],
  explanation: "Luas = 1/2 √ó alas √ó tinggi"
},
{
  type: "input",
  question: "Area of triangle with base 14 cm and height 6 cm = .... cm¬≤",
  correctAnswers: ["42"],
  explanation: "Luas = 1/2 √ó alas √ó tinggi"
},
               
        {
          type: "input",
          question: "631 + 428 = .....",
          correctAnswers: ["1.059", "1059", "1,059"],
          explanation: ""
        }
        
      ],
      science: [
        {
          type: "choice",
          question: "In which body system is the heart found?",
          options: ["breathing system", "circulatory system", "respiratory system", "skeletal system"],
          answerIndex: 2,
          explanation: ""
        },

        {
          type: "choice",
          question: "Why is food kept in a refrigerator?",
          options: ["Bacteria grow slowly and the food is kept ready to eat", "Bacteria grow slowly and the food is kept frozen", "Bacteria do not grow and the food is kept ready to eat", "Bacteria do not grow and the food is kept frozen"],
          answerIndex: 1,
          explanation: ""
        },

        {
          type: "choice",
          question: "Which of these are found in the thorax?",
          options: ["heart and blood vessels only", "heart and lungs only", "lungs and blood vessels only", "lungs, heart and blood vessels"],
          answerIndex: 1,
          explanation: ""
        },

        {
          type: "choice",
          question: "How do micro-organisms help in bread making?",
          options: ["They remove lumps from the flour", "They help the bread to cook at high temperatures", "They help the dough to rise", "They keep the bread float at the bottom"],
          answerIndex: 1,
          explanation: ""
        },

        {
          type: "choice",
          question: "What is the main reason that humans need a heart?",
          options: ["to use oxygen in a chemical reaction", "to remove waste gases", "to pump blood around the body", "to ventilate the lungs"],
          answerIndex: 1,
          explanation: ""
        },
        {
        type: "choice",
        question: "Which are the correct names of the organs labelled X and Y in the diagram?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture1.png",
        options: [
        "X: right lung; Y: heart",
        "X: heart; Y: right lung",
        "X: left lung; Y: heart",
        "X: heart; Y: left lung"
         ],
        answerIndex: 0,
        explanation: ""
        },

        {
          type: "choice",
          question: "Which body system does the poster show?",
          image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture2.png",
          options: ["breathing system", "circulatory system", "excretory system", "respiratory system"],
          answerIndex: 2,
          explanation: ""
        },

        {
          type: "choice",
          question: "Blood goes from the heart to Q to pick up oxygen. Pick one of the name Q.",
          image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture2.png",
          options: ["brain", "lungs", "mouth", "nose"],
          answerIndex: 2,
          explanation: ""
        },

        {
        type: "choice",
        question: "Which waste does the blood take to Q to be removed?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture2.png",
        options: ["Air", "carbon dioxide", "oxygen", "sweat"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "Maria is checking the pulse in her neck to measure her heart rate. In which other place could she easily check a pulse?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture3.png",
        options: ["Elbow", "Knee", "Shoulder", "wrist"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "Maria counts for 15 seconds. She counts 20 beats. What is Maria‚Äôs heart rate in beats per minute?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture3.png",
        options: ["20", "40", "80", "300"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "Which arrow shows the force of weight?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture4.png",
        options: ["A", "B", "C", "D"],
        answerIndex: 2,
        explanation: ""
        },  

        {
        type: "choice",
        question: "Maka is making some bread dough. Before he starts, he washes his hands. Which is the best description of why Maka washes his hands before making the dough?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture8.png",
        options: ["to stop the dough sticking to his hands", "to stop bacteria in the dough making him ill", "to stop the dough becoming too soft", "to stop bacteria from his hands going into the dough"],
        answerIndex: 2,
        explanation: ""
        }, 

        {
        type: "choice",
        question: "A student has this symbol in his notebook. Why do scientists use international symbols for electrical components?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture7.png",
        options: ["many scientists cannot read words very well", "scientists are very good at drawing things", "scientists speak and write in different languages", "many scientists fi nd spelling very diffi cult"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "How many cells are shown in the picture?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture6.png",
        options: ["One", "Two", "Three", "Four"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "Which of the following is not a micro-organism?",
        options: ["Bacteria", "Earthworm", "Mould", "virus"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "What equipment is used to look at micro-organisms?",
        options: ["Binoculars", "Hand lens", "Microscope", "Telescope"],
        answerIndex: 2,
        explanation: ""
        },

        {
        type: "choice",
        question: "This fishing boat has a motor at the back. In which direction is the force from the motor?",
        image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture5.png",
        options: ["v", "<", "^", ">"],
        answerIndex: 2,
        explanation: ""
        }, 

{
  type: "input3",
  question: "The oxygen our body needs comes from the ( X ) The entry of this gas into our lungs is called ( Y ) When oxygen reaches the organs of our body, it is used for ( Z )",
  image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture20.png",
  correctAnswers: [
    ["left lung", "lung kiri", "paru kiri", "paru-paru kiri"],        // untuk X
    ["right lung", "lung kanan", "paru kanan", "paru-paru kanan"],    // untuk Y
    ["heart", "jantung"]                                               // untuk Z
  ],
  explanation: "X = Left lung, Y = Right lung, Z = Heart."
},

        {
          type: "input",
          question: "Use the words in the box to complete the sentences. Words may only be used once. ",
          correctAnswers: ["uap", "gas", "uap air"],
          explanation: "Pada suhu di atas 100¬∞C, air berwujud gas (uap air)."
        }
      ],
      english: [
{
  type: "choice",
  question: "Which sentence is in the Present Continuous tense?",
  options: ["He plays football every day.", "He is playing football now.", "He played football yesterday.", "He will play football tomorrow."],
  answerIndex: 1,
  explanation: "Present Continuous = is/am/are + verb-ing. 'He is playing' shows an action happening now."
},
{
  type: "choice",
  question: "Choose the correct Past Simple sentence.",
  options: ["She is cooking dinner.", "She cooks dinner.", "She cooked dinner yesterday.", "She has cooked dinner."],
  answerIndex: 2,
  explanation: "Past Simple uses verb + ed for regular verbs and often includes a time marker such as 'yesterday'."
},
{
  type: "choice",
  question: "Which adjective is comparative?",
  options: ["Big", "The biggest", "Bigger", "Very big"],
  answerIndex: 2,
  explanation: "Comparative adjectives compare two things: bigger, smaller, taller, etc."
},
{
  type: "choice",
  question: "The Nile is ___ river in the world.",
  options: ["long", "longer", "the longest", "as long as"],
  answerIndex: 2,
  explanation: "Superlative form for comparing more than two: the longest."
},
{
  type: "choice",
  question: "Which sentence uses 'going to' for a plan?",
  options: ["I think it will rain.", "I am going to visit my grandma tomorrow.", "It rains every day.", "I visited her yesterday."],
  answerIndex: 1,
  explanation: "'Going to' is used for future plans or intentions."
},
{
  type: "choice",
  question: "Choose the correct modal verb: You ___ wear a helmet when riding a bike.",
  options: ["can", "should", "must", "could"],
  answerIndex: 2,
  explanation: "'Must' expresses strong obligation."
},
{
  type: "choice",
  question: "She has lived here ___ 5 years.",
  options: ["for", "since", "at", "from"],
  answerIndex: 0,
  explanation: "'For' is used for duration (for 5 years)."
},
{
  type: "choice",
  question: "Which preposition completes the sentence: The cat is hiding ___ the table.",
  options: ["between", "under", "above", "outside"],
  answerIndex: 1,
  explanation: "'Under' describes something below another object."
},
{
  type: "choice",
  question: "Choose the correct sentence with adverbs of frequency.",
  options: ["He goes always to school.", "Always he goes to school.", "He always goes to school.", "He goes to always school."],
  answerIndex: 2,
  explanation: "Adverb of frequency is placed before the main verb: He always goes."
},
{
  type: "choice",
  question: "Which sentence uses 'because' correctly?",
  options: ["She stayed home because she was sick.", "Because she was sick she stayed home?", "Because was she sick stayed home.", "She stayed home sick because."],
  answerIndex: 0,
  explanation: "Because introduces a reason clause."
},
{
  type: "choice",
  question: "Choose the correct meaning of the word 'talented'.",
  options: ["Very tired", "Having a natural skill", "Easy to break", "Not friendly"],
  answerIndex: 1
},
{
  type: "choice",
  question: "Which of the following is a place where scientists work?",
  options: ["Library", "Laboratory", "Bakery", "Gym"],
  answerIndex: 1
},
{
  type: "choice",
  question: "What is the superlative form of 'interesting'?",
  options: ["More interesting", "Most interesting", "Interestingest", "The interestest"],
  answerIndex: 1
},
{
  type: "choice",
  question: "Choose the correct future prediction using 'will'.",
  options: ["I am going to be late.", "She will probably come to the party.", "She is coming to the party now.", "She came to the party."],
  answerIndex: 1,
  explanation: "'Will' is used for predictions or decisions made at the moment."
},
{
  type: "choice",
  question: "Which sentence is correct?",
  options: ["There is much apples.", "There are many apples.", "There is many apples.", "There are much apples."],
  answerIndex: 1,
  explanation: "'Many' is used with countable nouns like apples."
},
{
  type: "choice",
  question: "Choose the correct phrasal verb: Please ___ the lights when you leave.",
  options: ["turn on", "turn off", "take off", "put on"],
  answerIndex: 1,
  explanation: "'Turn off' means to stop the electricity."
},
{
  type: "choice",
  question: "Which sentence is in Present Perfect?",
  options: ["I have finished my homework.", "I finish my homework.", "I am finishing my homework.", "I finished my homework."],
  answerIndex: 0,
  explanation: "Present Perfect uses have/has + past participle."
},
{
  type: "choice",
  question: "Choose the correct word: A dolphin is a very ___ animal.",
  options: ["intelligent", "dangerous", "noisy", "lazy"],
  answerIndex: 0
},
{
  type: "choice",
  question: "Choose the correct connector: ___ it was raining, we went outside.",
  options: ["And", "But", "Although", "So"],
  answerIndex: 2,
  explanation: "'Although' shows contrast."
},
{
  type: "input",
  question: "Fill in the blank: My father works in a hospital. He is a ______.",
  correctAnswers: ["doctor"],
  explanation: "Vocabulary about jobs: A person who works in a hospital helping sick people is a doctor."
},
{
  type: "input",
  question: "Fill in the blank: A tiger is a wild ______ that lives in the forest.",
  correctAnswers: ["animal"],
  explanation: "Vocabulary about animals & habitats: Tiger is a wild animal."
},
{
  type: "input",
  question: "Fill in the blank: To stay healthy, we should eat more fruits and ______.",
  correctAnswers: ["vegetables", "veggies"],
  explanation: "Vocabulary about food and health: Fruits and vegetables are healthy foods."
},
{
  type: "input",
  question: "Fill in the blank: A smartphone is a type of modern ______ we use every day.",
  correctAnswers: ["technology", "device", "gadget"],
  explanation: "Vocabulary about technology: Smartphone is a modern device/gadget."
},
{
  type: "input",
  question: "Fill in the blank: The weather is very cold today. Please wear your ______.",
  correctAnswers: ["jacket", "coat"],
  explanation: "Vocabulary about weather & clothing: A jacket or coat is worn during cold weather."
},
{
  type: "input",
  question: "Reading: 'Mira loves science. She spends her afternoons making small experiments in her room. Her dream is to become a scientist in the future.'\nWhat does Mira want to be in the future? ______",
  correctAnswers: ["scientist"],
  explanation: "The text states: 'Her dream is to become a scientist.'"
},
{
  type: "input",
  question: "Reading: 'Every Saturday, Rafi helps his mother at the market. He carries bags, cleans the stall, and talks politely to customers. He enjoys helping people.'\nWhere does Rafi help his mother? ______",
  correctAnswers: ["market", "the market"],
  explanation: "The passage clearly mentions: 'Rafi helps his mother at the market.'"
},
{
  type: "input",
  question: "Reading: 'Lina keeps a small diary. She writes about her school activities, her feelings, and the things she wants to do. She writes in it every night before sleeping.'\nWhat does Lina write in every night? ______",
  correctAnswers: ["diary", "her diary"],
  explanation: "The text says: 'Lina keeps a small diary... She writes in it every night.'"
},
{
  type: "input",
  question: "Reading: 'Tom‚Äôs family visited the beach last weekend. Tom built a sandcastle, swam in the sea, and collected seashells. It was his favorite trip this year.'\nWhat did Tom build at the beach? ______",
  correctAnswers: ["sandcastle", "a sandcastle"],
  explanation: "The story says: 'Tom built a sandcastle.'"
},
{
  type: "input",
  question: "Reading: 'Dika takes care of a small garden behind his house. He waters the plants every morning and checks the soil. His favorite plant is the sunflower because it grows tall and bright.'\nWhat is Dika‚Äôs favorite plant? ______",
  correctAnswers: ["sunflower", "the sunflower"],
  explanation: "The text says: 'His favorite plant is the sunflower.'"
},
{
  type: "input",
  question: "Rewrite the sentence using correct punctuation: 'my friend lives in jakarta'\nAnswer: ______",
  correctAnswers: ["My friend lives in Jakarta."],
  explanation: "Capital letter at the beginning (My) and for proper noun (Jakarta). Add a full stop."
},
{
  type: "input",
  question: "Arrange the words into a correct sentence: 'playing / is / the guitar / she'\nAnswer: ______",
  correctAnswers: ["She is playing the guitar."],
  explanation: "Correct order: Subject (She) + to be (is) + verb-ing (playing) + object (the guitar)."
},
{
  type: "choice",
  question: "Choose the sentence with correct capitalization.",
  options: [
    "my brother and i went to jakarta.",
    "My brother and I went to jakarta.",
    "My Brother and i went to Jakarta.",
    "My brother and I went to Jakarta."
  ],
  answerIndex: 3,
  explanation: "Capital letters are used at the beginning of the sentence, for the pronoun 'I', and for the proper noun 'Jakarta'."
},
{
  type: "choice",
  question: "Choose the best topic sentence for a paragraph about your hobby.",
  options: [
    "I have many things at home.",
    "I like reading books in my free time.",
    "My mother works very hard every day.",
    "The weather is very hot today."
  ],
  answerIndex: 1,
  explanation: "Topic sentence must introduce the main idea of the paragraph‚Äîreading as a hobby."
},
{
  type: "choice",
  question: "Choose the correct sentence order to form a logical paragraph.",
  options: [
    "Finally, we went home. ‚Üí First, we arrived at the zoo. ‚Üí Then, we saw many animals.",
    "Then, we saw many animals. ‚Üí First, we arrived at the zoo. ‚Üí Finally, we went home.",
    "First, we arrived at the zoo. ‚Üí Then, we saw many animals. ‚Üí Finally, we went home.",
    "We went home. ‚Üí We saw animals. ‚Üí We arrived."
  ],
  answerIndex: 2,
  explanation: "A logical sequence uses: First ‚Üí Then ‚Üí Finally."
},
{
  type: "choice",
  question: "Choose the sentence that uses the correct past tense.",
  options: [
    "Yesterday, I write a letter to my friend.",
    "Yesterday, I wrote a letter to my friend.",
    "Yesterday, I writed a letter to my friend.",
    "Yesterday, I writing a letter to my friend."
  ],
  answerIndex: 1,
  explanation: "'Write' is an irregular verb. Past form = 'wrote'."
},
{
  type: "choice",
  question: "Choose the sentence that is BEST for describing a place.",
  options: [
    "The park is big, green, and very clean.",
    "I like the park.",
    "The park is a place.",
    "The park has things."
  ],
  answerIndex: 0,
  explanation: "A good descriptive sentence uses adjectives and specific details."
},
{
  type: "choice",
  question: "Your friend asks: 'Can you tell me how to get to the library?' Which is the best response?",
  options: [
    "Yes, I like books.",
    "Go straight and turn right. The library is on your left.",
    "The library is big.",
    "I am going home."
  ],
  answerIndex: 1,
  explanation: "The correct speaking response must give directions, not unrelated information."
},
{
  type: "choice",
  question: "Listening-style: You hear, 'Please bring your workbook, pencil, and eraser to class tomorrow.' What must you bring?",
  options: [
    "Only a workbook",
    "A workbook and snack",
    "A workbook, pencil, and eraser",
    "Only a pencil"
  ],
  answerIndex: 2,
  explanation: "The instruction mentions all three items clearly: workbook, pencil, and eraser."
},
{
  type: "choice",
  question: "Speaking: Choose the best sentence to describe your daily routine.",
  options: [
    "I am school every day.",
    "I go to school every morning at 7 a.m.",
    "School is a place.",
    "The morning is good."
  ],
  answerIndex: 1,
  explanation: "A speaking routine sentence uses Present Simple and gives a clear daily activity."
},
{
  type: "choice",
  question: "Listening-style: You hear your teacher say, 'Don't forget, the test will start at 9 a.m.' What time does the test start?",
  options: [
    "8 a.m.",
    "9 a.m.",
    "10 a.m.",
    "In the afternoon"
  ],
  answerIndex: 1,
  explanation: "The audio clearly states the test begins at 9 a.m."
},
{
  type: "choice",
  question: "Speaking: Your friend says, 'I'm not feeling well today.' What is the BEST response?",
  options: [
    "That's great!",
    "Why are you here?",
    "I don't care.",
    "I'm sorry to hear that. Get well soon."
  ],
  answerIndex: 3,
  explanation: "Good speaking skills include showing empathy and giving a polite response."
},

{
  type: "choice",
  question: "Reading: What is the main idea of this text? 'Tom loves science. He spends his free time building small robots and reading books about space. He wants to be an engineer when he grows up.'",
  options: ["Tom likes animals.", "Tom is interested in science and robotics.", "Tom wants to be a teacher.", "Tom doesn‚Äôt enjoy learning."],
  answerIndex: 1,
  explanation: "The text focuses on Tom‚Äôs interest in science, robots, and his dream job."
}

      ]
    };

    function getMixedQuestions() {
      return [
        ...questionBank.math,
        ...questionBank.science,
        ...questionBank.english
      ];
    }

    // ==============================
    // STATE & ELEMENTS
    // ==============================
    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let answeredCount = 0;
    let skippedCount = 0;
    let isQuestionLocked = false;

    const categorySelect = document.getElementById("categorySelect");
    const questionCountSelect = document.getElementById("questionCountSelect");
    const startBtn = document.getElementById("startBtn");

    const emptyState = document.getElementById("emptyState");
    const quizCard = document.getElementById("quizCard");
    const resultCard = document.getElementById("resultCard");

    const categoryTag = document.getElementById("categoryTag");
    const questionTag = document.getElementById("questionTag");
    const quizTitle = document.getElementById("quizTitle");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const topScore = document.getElementById("topScore");

    const progressFill = document.getElementById("progressFill");
    const progressLabel = document.getElementById("progressLabel");
    const answeredLabel = document.getElementById("answeredLabel");

    const questionText = document.getElementById("questionText");
    const questionImageContainer = document.getElementById("questionImageContainer");
    const optionsContainer = document.getElementById("optionsContainer");
    const inputContainer = document.getElementById("inputContainer");
    const input1 = document.getElementById("input1");
    const input2 = document.getElementById("input2");
    const input3 = document.getElementById("input3");
    const group2 = document.getElementById("group2");
    const group3 = document.getElementById("group3");
    const label1 = document.getElementById("label1");
    const label2 = document.getElementById("label2");
    const label3 = document.getElementById("label3");
    const checkInputBtn = document.getElementById("checkInputBtn");
    const feedback = document.getElementById("feedback");

    const nextBtn = document.getElementById("nextBtn");
    const skipBtn = document.getElementById("skipBtn");

    const emojiResult = document.getElementById("emojiResult");
    const resultTitle = document.getElementById("resultTitle");
    const resultMessage = document.getElementById("resultMessage");
    const resultScore = document.getElementById("resultScore");
    const resultMaxScore = document.getElementById("resultMaxScore");
    const resultCorrect = document.getElementById("resultCorrect");
    const resultWrong = document.getElementById("resultWrong");
    const resultSkipped = document.getElementById("resultSkipped");
    const resultPercent = document.getElementById("resultPercent");

    const backToStartBtn = document.getElementById("backToStartBtn");
    const retryBtn = document.getElementById("retryBtn");

    // Helpers
    function shuffleArray(arr) {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function getCategoryLabel(cat) {
      switch (cat) {
        case "math": return "Math";
        case "science": return "Science";
        case "english": return "English";
        case "mix": return "Mix";
        default: return "Latihan";
      }
    }

    function startQuiz() {
      const cat = categorySelect.value;
      const count = parseInt(questionCountSelect.value, 10);

      let questions;
      if (cat === "mix") {
        questions = getMixedQuestions();
      } else {
        questions = questionBank[cat] || [];
      }

      if (!questions.length) {
        alert("Belum ada soal untuk kategori ini.");
        return;
      }

      const shuffled = shuffleArray(questions);
      currentQuestions = shuffled.slice(0, Math.min(count, shuffled.length));

      currentIndex = 0;
      score = 0;
      answeredCount = 0;
      skippedCount = 0;
      isQuestionLocked = false;

      scoreDisplay.textContent = "0";
      topScore.textContent = "0 XP";
      feedback.textContent = "";
      feedback.className = "feedback";
      nextBtn.disabled = true;

      emptyState.style.display = "none";
      quizCard.style.display = "block";
      resultCard.style.display = "none";

      categoryTag.textContent = getCategoryLabel(cat);

      updateProgress();
      renderQuestion();
    }

    function updateProgress() {
      const total = currentQuestions.length;
      const done = answeredCount + skippedCount;
      const percent = total > 0 ? (done / total) * 100 : 0;

      progressFill.style.width = percent + "%";
      progressLabel.textContent = Math.round(percent) + "% complete";
      answeredLabel.textContent = answeredCount + " answered";
      questionTag.textContent = "Question " + (currentIndex + 1) + " of " + total;

      quizTitle.textContent =
        currentIndex === 0
          ? "Fokus sebentar, lalu kita rayakan skornya! üéâ"
          : "Mantap, lanjut lagi! üöÄ";
    }

    function renderQuestion() {
      const q = currentQuestions[currentIndex];
      if (!q) return;

      const type = q.type || "choice";

      isQuestionLocked = false;
      feedback.textContent = "";
      feedback.className = "feedback";
      nextBtn.disabled = true;

      questionText.textContent = q.question;

      // Gambar soal
      if (q.image) {
        questionImageContainer.innerHTML =
          '<img src="' + q.image + '" alt="Question image" />';
        questionImageContainer.style.display = "block";
      } else {
        questionImageContainer.innerHTML = "";
        questionImageContainer.style.display = "none";
      }

      // reset containers
      optionsContainer.innerHTML = "";
      optionsContainer.style.display = "none";
      inputContainer.style.display = "none";

      if (type === "choice") {
        renderChoiceQuestion(q);
      } else if (type === "input" || type === "input3") {
        renderInputQuestion(q);
      }
    }

    function renderChoiceQuestion(q) {
      optionsContainer.style.display = "flex";

      const labels = ["A", "B", "C", "D", "E", "F"];

      q.options.forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.innerHTML = `
          <span class="option-label">${labels[index] || "?"}</span>
          <span class="option-text">${opt}</span>
        `;
        btn.addEventListener("click", () => handleOptionClick(index));
        optionsContainer.appendChild(btn);
      });
    }

    function renderInputQuestion(q) {
      inputContainer.style.display = "flex";

      const isTriple = q.type === "input3";

      // label (bisa custom via q.labels)
      const labels = q.labels || (isTriple ? ["X", "Y", "Z"] : ["Jawaban", "Y", "Z"]);
      label1.textContent = labels[0] || (isTriple ? "X" : "Jawaban");
      label2.textContent = labels[1] || "Y";
      label3.textContent = labels[2] || "Z";

      // show/hide kolom
      group2.style.display = isTriple ? "flex" : "none";
      group3.style.display = isTriple ? "flex" : "none";

      // reset nilai
      input1.value = "";
      input2.value = "";
      input3.value = "";

      input1.disabled = false;
      input2.disabled = false;
      input3.disabled = false;
      checkInputBtn.disabled = false;

      input1.focus();
    }

    function handleOptionClick(selectedIndex) {
      if (isQuestionLocked) return;

      const currentQuestion = currentQuestions[currentIndex];
      const optionButtons = Array.from(
        document.querySelectorAll(".option-btn")
      );

      isQuestionLocked = true;
      answeredCount++;

      optionButtons.forEach((btn, idx) => {
        btn.disabled = true;
        if (idx === currentQuestion.answerIndex) {
          btn.classList.add("correct");
        }
        if (idx === selectedIndex && selectedIndex !== currentQuestion.answerIndex) {
          btn.classList.add("wrong");
        }
      });

      if (selectedIndex === currentQuestion.answerIndex) {
        score += 10;
        scoreDisplay.textContent = score;
        topScore.textContent = score + " XP";
        feedback.textContent = "Benar! " + (currentQuestion.explanation || "");
        feedback.className = "feedback correct";
      } else {
        feedback.textContent =
          "Belum tepat. " +
          (currentQuestion.explanation
            ? "Penjelasan: " + currentQuestion.explanation
            : "");
        feedback.className = "feedback wrong";
      }

      updateProgress();
      nextBtn.disabled = false;
      nextBtn.textContent =
        currentIndex === currentQuestions.length - 1
          ? "Lihat Hasil üèÅ"
          : "Berikutnya ‚ûú";
    }

    function handleInputSubmit() {
      if (isQuestionLocked) return;
      const q = currentQuestions[currentIndex];
      if (!q) return;

      if (q.type === "input3") {
        handleInput3Submit(q);
      } else {
        handleSingleInput(q);
      }
    }

    function normalize(str) {
      return str.toString().trim().toLowerCase();
    }

    function handleSingleInput(q) {
      let userAnswer = input1.value.trim();
      if (!userAnswer) {
        feedback.textContent = "Tulis dulu jawabannya, ya üòä";
        feedback.className = "feedback wrong";
        return;
      }

      const normalizedUser = normalize(userAnswer);
      let correctAnswers = [];

      if (Array.isArray(q.correctAnswers)) {
        correctAnswers = q.correctAnswers;
      } else if (
        typeof q.correctAnswers === "string" ||
        typeof q.correctAnswers === "number"
      ) {
        correctAnswers = [q.correctAnswers];
      }

      const isCorrect = correctAnswers.some(
        (ans) => normalize(ans) === normalizedUser
      );

      isQuestionLocked = true;
      answeredCount++;

      input1.disabled = true;
      input2.disabled = true;
      input3.disabled = true;
      checkInputBtn.disabled = true;

      if (isCorrect) {
        score += 10;
        scoreDisplay.textContent = score;
        topScore.textContent = score + " XP";
        feedback.textContent = "Benar! " + (q.explanation || "");
        feedback.className = "feedback correct";
      } else {
        const correctShow = correctAnswers[0] ?? "";
        feedback.textContent =
          "Belum tepat. " +
          (correctShow ? "Jawaban benar: " + correctShow + ". " : "") +
          (q.explanation || "");
        feedback.className = "feedback wrong";
      }

      updateProgress();
      nextBtn.disabled = false;
      nextBtn.textContent =
        currentIndex === currentQuestions.length - 1
          ? "Lihat Hasil üèÅ"
          : "Berikutnya ‚ûú";
    }

    function handleInput3Submit(q) {
      const a1 = normalize(input1.value);
      const a2 = normalize(input2.value);
      const a3 = normalize(input3.value);

      if (!a1 || !a2 || !a3) {
        feedback.textContent = "Semua kolom X, Y, dan Z harus diisi ya üòä";
        feedback.className = "feedback wrong";
        return;
      }

      function isCorrectInput(user, validList) {
        return validList.some((v) => normalize(v) === user);
      }

      const correct1 = isCorrectInput(a1, q.correctAnswers[0]);
      const correct2 = isCorrectInput(a2, q.correctAnswers[1]);
      const correct3 = isCorrectInput(a3, q.correctAnswers[2]);

      isQuestionLocked = true;
      answeredCount++;

      input1.disabled = true;
      input2.disabled = true;
      input3.disabled = true;
      checkInputBtn.disabled = true;

      if (correct1 && correct2 && correct3) {
        score += 10;
        scoreDisplay.textContent = score;
        topScore.textContent = score + " XP";
        feedback.textContent = "Benar! " + (q.explanation || "");
        feedback.className = "feedback correct";
      } else {
        feedback.textContent =
          "Belum tepat. " + (q.explanation || "");
        feedback.className = "feedback wrong";
      }

      updateProgress();
      nextBtn.disabled = false;
      nextBtn.textContent =
        currentIndex === currentQuestions.length - 1
          ? "Lihat Hasil üèÅ"
          : "Berikutnya ‚ûú";
    }

    function goToNextQuestion() {
      if (currentIndex >= currentQuestions.length - 1) {
        showResult();
        return;
      }
      currentIndex++;
      updateProgress();
      renderQuestion();
    }

    function skipQuestion() {
      if (isQuestionLocked) {
        goToNextQuestion();
        return;
      }
      skippedCount++;

      if (currentIndex >= currentQuestions.length - 1) {
        showResult();
      } else {
        currentIndex++;
        updateProgress();
        renderQuestion();
      }
    }

    function showResult() {
      quizCard.style.display = "none";
      resultCard.style.display = "block";

      const totalQuestions = currentQuestions.length;
      const correctCount = score / 10;
      const wrongCount = totalQuestions - correctCount - skippedCount;
      const percent =
        totalQuestions > 0
          ? Math.round((correctCount / totalQuestions) * 100)
          : 0;

      resultScore.textContent = score;
      resultMaxScore.textContent = totalQuestions * 10;
      resultCorrect.textContent = correctCount;
      resultWrong.textContent = wrongCount;
      resultSkipped.textContent = skippedCount;
      resultPercent.textContent = percent + "%";

      if (percent === 100) {
        emojiResult.textContent = "üåü";
        resultTitle.textContent = "Perfect! Math & Science Hero! üî•";
        resultMessage.textContent =
          "Semua soal benar! Ulangi atau naikkan jumlah soalnya untuk tantangan baru.";
      } else if (percent >= 80) {
        emojiResult.textContent = "üèÜ";
        resultTitle.textContent = "Keren banget! üí™";
        resultMessage.textContent =
          "Nilaimu sudah tinggi. Coba cek lagi soal-soal yang masih salah, ya.";
      } else if (percent >= 50) {
        emojiResult.textContent = "üöÄ";
        resultTitle.textContent = "Lumayan, kita push lagi!";
        resultMessage.textContent =
          "Belajar itu pelan-pelan tapi rutin. Ulangi sesi ini supaya makin kuat.";
      } else {
        emojiResult.textContent = "üå±";
        resultTitle.textContent = "Awal yang bagus untuk mulai! üôÇ";
        resultMessage.textContent =
          "Tidak apa-apa kalau masih banyak salah. Kita bisa mulai dari materi mudah dulu.";
      }
    }

    function resetToStart() {
      quizCard.style.display = "none";
      resultCard.style.display = "none";
      emptyState.style.display = "flex";
    }

    function retrySameQuiz() {
      if (!currentQuestions || !currentQuestions.length) {
        resetToStart();
        return;
      }

      currentQuestions = shuffleArray(currentQuestions);
      currentIndex = 0;
      score = 0;
      answeredCount = 0;
      skippedCount = 0;
      isQuestionLocked = false;

      scoreDisplay.textContent = "0";
      topScore.textContent = "0 XP";
      feedback.textContent = "";
      feedback.className = "feedback";
      nextBtn.disabled = true;

      resultCard.style.display = "none";
      quizCard.style.display = "block";

      updateProgress();
      renderQuestion();
    }

    // Event listeners
    startBtn.addEventListener("click", startQuiz);
    nextBtn.addEventListener("click", goToNextQuestion);
    skipBtn.addEventListener("click", skipQuestion);
    backToStartBtn.addEventListener("click", resetToStart);
    retryBtn.addEventListener("click", retrySameQuiz);
    checkInputBtn.addEventListener("click", handleInputSubmit);

    [input1, input2, input3].forEach((el) => {
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          handleInputSubmit();
        }
      });
    });
  </script>
</body>
</html>