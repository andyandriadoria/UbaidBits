<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ubaid Lab</title>

  <!-- Google Font mirip KooBits -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Palet ala KooBits */
      --kb-blue-dark: #0069b8;
      --kb-blue: #00a4ff;
      --kb-blue-soft: #e3f5ff;
      --kb-blue-bg: #0a94df;
      --kb-yellow: #ffc928;
      --kb-yellow-dark: #f5a623;
      --kb-orange: #ff8a3d;
      --kb-green: #59c15b;

      --bg: #0288d1;
      --card: #ffffff;
      --text-main: #163148;
      --text-soft: #60758e;
      --muted: #8aa5c2;
      --error: #e63946;
      --success: #2ecc71;

      --radius-xl: 26px;
      --radius-lg: 20px;
      --radius-md: 14px;
      --shadow-soft: 0 16px 40px rgba(5, 61, 112, 0.35);
      --shadow-small: 0 8px 16px rgba(0, 0, 0, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Nunito", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh;
      background: radial-gradient(circle at top, #35b4ff 0, var(--kb-blue-bg) 45%, #01619b 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 18px;
      color: var(--text-main);
    }

    .app-shell {
      width: 100%;
      max-width: 1200px;
      background: linear-gradient(135deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
      border-radius: 32px;
      padding: 0;
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(12px);
    }

    /* Top bar ala KooBits */
    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 24px;
      background: #263238;
      color: #f5f5f5;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 34px;
      height: 34px;
      border-radius: 14px;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: #ff5252;
      font-weight: 800;
      box-shadow: 0 6px 12px rgba(0,0,0,0.25);
    }

    .brand-name {
      font-weight: 800;
      letter-spacing: 0.04em;
      font-size: 17px;
    }

    .top-nav {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 13px;
    }

    .top-nav span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      opacity: 0.8;
      cursor: default;
    }

    .top-nav span.active {
      opacity: 1;
      font-weight: 700;
    }

    .top-nav span.icon {
      font-size: 18px;
    }

    .top-right {
      display: flex;
      align-items: center;
      gap: 14px;
      font-size: 13px;
    }

    .streak-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 10px;
      border-radius: 999px;
      background: #ff7043;
      color: #fff;
      font-size: 12px;
    }

    .avatar-mini {
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: #ff5252;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }

    /* Main content layout */
    .app-main {
      padding: 18px 22px 22px;
      display: grid;
      grid-template-columns: 260px 1fr;
      gap: 18px;
      background: radial-gradient(circle at top, #3ab8ff 0, #0588d4 40%, #0367a4 100%);
    }

    /* Sidebar kiri: menu besar */
    .side-menu {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .profile-card {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      padding: 10px 12px;
      box-shadow: var(--shadow-small);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .profile-avatar {
      width: 52px;
      height: 52px;
      border-radius: 50%;
      background: #ff7043;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
      color: #fff;
      box-shadow: 0 6px 14px rgba(0,0,0,0.3);
    }

    .profile-info {
      flex: 1;
    }

    .profile-info h2 {
      font-size: 15px;
      font-weight: 800;
      margin-bottom: 2px;
    }

    .profile-info p {
      font-size: 11px;
      color: var(--text-soft);
    }

    .xp-badge {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      font-size: 11px;
      font-weight: 700;
      color: #1565c0;
    }

    .xp-main {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--kb-blue-soft);
    }

    .xp-main span.icon {
      font-size: 14px;
    }

    .xp-level {
      margin-top: 4px;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: #00c853;
      color: #fff;
    }

    .side-tile {
      background: rgba(255, 255, 255, 0.96);
      border-radius: var(--radius-lg);
      padding: 12px 14px;
      box-shadow: var(--shadow-small);
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: default;
    }

    .side-tile-icon {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: #fff;
      background: #ffb74d;
    }

    .side-tile:nth-child(2) .side-tile-icon { background: #ffb74d; }
    .side-tile:nth-child(3) .side-tile-icon { background: #4db6ac; }
    .side-tile:nth-child(4) .side-tile-icon { background: #ba68c8; }

    .side-tile-text {
      font-size: 13px;
      font-weight: 700;
      color: #263238;
    }

    .side-tile-sub {
      font-size: 11px;
      color: var(--muted);
    }

    /* Right main area */
    .main-col {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    /* Hero Daily Challenge */
    .hero-daily {
      background: #ffce32;
      border-radius: var(--radius-xl);
      padding: 14px 18px;
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
    }

    .hero-daily::after {
      content: "";
      position: absolute;
      right: -40px;
      top: -30px;
      width: 160px;
      height: 160px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.25);
      opacity: 0.6;
    }

    .hero-text h1 {
      font-size: 22px;
      font-weight: 900;
      letter-spacing: 0.03em;
      color: #c05d00;
      margin-bottom: 4px;
    }

    .hero-text p {
      font-size: 13px;
      color: #8b5300;
    }

    .hero-meta {
      margin-top: 4px;
      font-size: 11px;
      color: #8b5300;
      opacity: 0.9;
    }

    .hero-action {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
    }

    .hero-trophy {
      font-size: 42px;
      filter: drop-shadow(0 4px 6px rgba(199, 125, 0, 0.5));
    }

    #startBtn {
      margin-top: 2px;
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 13px;
      font-weight: 800;
      cursor: pointer;
      background: linear-gradient(135deg, #ff8a3d, #ff5722);
      color: #fff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 18px rgba(204, 96, 0, 0.55);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
      text-transform: uppercase;
      letter-spacing: 0.04em;
    }

    #startBtn:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow: 0 12px 20px rgba(204, 96, 0, 0.7);
    }

    #startBtn:active {
      transform: translateY(0);
      box-shadow: 0 7px 14px rgba(204, 96, 0, 0.6);
    }

    /* Controls dropdown tampil simple seperti pill */
    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .controls-pill {
      background: rgba(255, 255, 255, 0.96);
      border-radius: 999px;
      padding: 6px 10px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: var(--shadow-small);
      font-size: 12px;
      color: var(--text-soft);
    }

    .controls-pill label {
      font-weight: 700;
      color: var(--text-main);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }

    .controls-pill select {
      border: none;
      outline: none;
      background: transparent;
      font-size: 12px;
      color: var(--text-main);
      font-weight: 700;
      padding-right: 4px;
      cursor: pointer;
    }

    .controls-pill select option {
      color: #000;
    }

    /* Empty state & quiz card */
    .empty-state {
      margin-top: 10px;
      padding: 14px 16px;
      border-radius: var(--radius-lg);
      background: rgba(13, 71, 161, 0.95);
      color: #e3f2fd;
      font-size: 13px;
      display: flex;
      gap: 10px;
      align-items: center;
      box-shadow: var(--shadow-small);
    }

    .empty-state-icon {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.18);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    .quiz-card {
      margin-top: 10px;
      padding: 14px 16px 16px;
      border-radius: var(--radius-lg);
      background: #ffffff;
      box-shadow: var(--shadow-soft);
    }

    .quiz-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .quiz-header-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .tag-row {
      display: flex;
      gap: 6px;
      font-size: 10px;
    }

    .tag-row span {
      padding: 2px 8px;
      border-radius: 999px;
      background: #e3f5ff;
      color: #1565c0;
      font-weight: 700;
    }

    .tag-row span.category {
      background: #ffecb3;
      color: #f57c00;
    }

    .quiz-header h2 {
      font-size: 14px;
      font-weight: 800;
      color: var(--text-main);
    }

    .score-pill {
      font-size: 11px;
      border-radius: 999px;
      background: #ffecb3;
      padding: 5px 10px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #c05d00;
      font-weight: 800;
    }

    .score-pill span.icon {
      font-size: 14px;
    }

    /* Progress */
    .progress-wrapper {
      margin-bottom: 10px;
    }

    .progress-label-row {
      display: flex;
      justify-content: space-between;
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 4px;
    }

    .progress-bar {
      width: 100%;
      height: 9px;
      border-radius: 999px;
      background: #e3f2fd;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #00c853, #ffd600);
      border-radius: inherit;
      transition: width 0.25s ease-out;
    }

    /* Question text & options */
    .question-text {
      font-size: 15px;
      font-weight: 700;
      color: var(--text-main);
      margin-bottom: 10px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 10px;
    }

    .option-btn {
      border-radius: var(--radius-md);
      padding: 9px 11px;
      border: 2px solid transparent;
      background: #f9fbff;
      color: var(--text-main);
      font-size: 13px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease, background 0.12s ease;
      box-shadow: 0 3px 6px rgba(13, 71, 161, 0.12);
    }

    .option-btn span.option-label {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: #00a4ff;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 800;
      font-size: 12px;
      flex-shrink: 0;
    }

    .option-btn span.option-text {
      flex: 1;
    }

    .option-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 10px rgba(13, 71, 161, 0.25);
      border-color: #00a4ff;
      background: #ffffff;
    }

    .option-btn.correct {
      border-color: #2ecc71;
      background: #e8f9f0;
    }

    .option-btn.wrong {
      border-color: #e53935;
      background: #ffebee;
    }

    .option-btn:disabled {
      cursor: default;
      transform: none;
      box-shadow: none;
    }

    /* Input answer row */
    .input-answer-row {
      display: none;
      gap: 8px;
      align-items: center;
      margin-bottom: 8px;
    }

    .input-answer-row input {
      flex: 1;
      border-radius: 999px;
      padding: 9px 12px;
      border: 2px solid #e3f2fd;
      background: #f9fbff;
      outline: none;
      font-size: 13px;
      color: var(--text-main);
    }

    .input-answer-row input:focus {
      border-color: #00a4ff;
      box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.4);
    }

    #checkInputBtn {
      border-radius: 999px;
      border: none;
      padding: 9px 14px;
      font-size: 12px;
      font-weight: 800;
      background: #00c853;
      color: #fff;
      box-shadow: 0 4px 8px rgba(0, 200, 83, 0.4);
      cursor: pointer;
    }

    #checkInputBtn:disabled {
      opacity: 0.7;
      box-shadow: none;
      cursor: default;
    }

    /* Feedback & bottom actions */
    .feedback-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 10px;
      margin-top: 4px;
    }

    .feedback {
      font-size: 12px;
      min-height: 18px;
    }

    .feedback.correct {
      color: var(--success);
      font-weight: 600;
    }

    .feedback.wrong {
      color: var(--error);
      font-weight: 600;
    }

    .bottom-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    button.secondary {
      border-radius: 999px;
      padding: 7px 12px;
      font-size: 12px;
      font-weight: 700;
      border: none;
      background: #e3f2fd;
      color: #1565c0;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 3px 6px rgba(13, 71, 161, 0.18);
    }

    button.secondary.outline {
      background: #ffffff;
      border: 1px dashed #bbdefb;
      box-shadow: none;
      color: #607d8b;
    }

    button.secondary:hover {
      background: #bbdefb;
    }

    button.secondary:disabled {
      opacity: 0.7;
      box-shadow: none;
      cursor: default;
    }

    /* Result card */
    .result-card {
      margin-top: 10px;
      padding: 16px 16px 16px;
      border-radius: var(--radius-lg);
      background: linear-gradient(135deg, #66bb6a, #aed581);
      color: #1b5e20;
      box-shadow: var(--shadow-soft);
    }

    .result-header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
      align-items: center;
    }

    .result-main h2 {
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 900;
    }

    .result-main h2 span.icon {
      font-size: 26px;
    }

    .result-main p {
      font-size: 13px;
      color: #234d20;
    }

    .result-score {
      text-align: right;
      font-size: 13px;
      color: #1b5e20;
      font-weight: 700;
    }

    .result-score strong {
      font-size: 20px;
    }

    .result-details {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
      font-size: 11px;
    }

    .chip {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-weight: 700;
    }

    .chip span.icon {
      font-size: 14px;
    }

    .result-actions {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .app-main {
        grid-template-columns: 1fr;
      }
      .side-menu {
        order: 2;
      }
      .main-col {
        order: 1;
      }
    }

.question-image {
  margin: 6px 0 10px;
  display: none;          /* default: disembunyikan kalau nggak ada gambar */
  text-align: center;
}

.question-image img {
  max-width: 100%;
  max-height: 220px;
  border-radius: 14px;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.15);
  background: #ffffff;
}

    @media (max-width: 640px) {
      body {
        padding: 10px;
      }
      .app-shell {
        border-radius: 20px;
      }
      .top-bar {
        flex-wrap: wrap;
        gap: 8px;
        padding-inline: 14px;
      }
      .app-main {
        padding: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- TOP BAR -->
    <header class="top-bar">
      <div class="brand">
        <div class="brand-logo">U</div>
        <div class="brand-name">UbaidBits</div>
      </div>
      <nav class="top-nav">
        <span class="active">üè† Home</span>
        <span>üìä Report</span>
        <span>üèÜ Leaderboard</span>
      </nav>
      <div class="top-right">
        <div class="streak-pill">üî• 7-day streak</div>
        <div class="avatar-mini">ü¶ñ</div>
      </div>
    </header>

    <main class="app-main">
      <!-- SIDEBAR LEFT -->
      <aside class="side-menu">
        <section class="profile-card">
          <div class="profile-avatar">ü§ñ</div>
          <div class="profile-info">
            <h2>Ubaid Badzil Azkandrias</h2>
            <p>Grade 6 ‚Ä¢ Daily Practice</p>
          </div>
          <div class="xp-badge">
            <div class="xp-main">
              <span class="icon">‚≠ê</span>
              <span id="topScore">0 XP</span>
            </div>
            <div class="xp-level">Lv. 6</div>
          </div>
        </section>

        <div class="side-tile">
          <div class="side-tile-icon">üß†</div>
          <div>
            <div class="side-tile-text">Brain Games</div>
            <div class="side-tile-sub">Asah otak sebelum latihan</div>
          </div>
        </div>
        <div class="side-tile">
          <div class="side-tile-icon">üìÖ</div>
          <div>
            <div class="side-tile-text">Events</div>
            <div class="side-tile-sub">Target belajar mingguan</div>
          </div>
        </div>
        <div class="side-tile">
          <div class="side-tile-icon">üìñ</div>
          <div>
            <div class="side-tile-text">Story</div>
            <div class="side-tile-sub">Cerita matematika seru</div>
          </div>
        </div>
      </aside>

      <!-- MAIN COLUMN -->
      <section class="main-col">
        <!-- HERO -->
        <section class="hero-daily">
          <div class="hero-text">
            <h1>Examination Primary Level</h1>
            <p>Special practice for Ubaid before the First Semester Final Exam.</p>
            <div class="hero-meta">
              Select the subject & number of questions below, then press
              <strong>Start</strong>.
            </div>
          </div>
          <div class="hero-action">
            <div class="hero-trophy">üèÜ</div>
            <button id="startBtn">
              Start
              <span>‚ö°</span>
            </button>
          </div>
        </section>

        <!-- CONTROL PILLS -->
        <section class="controls-row" style="margin-top: 6px;">
          <div class="controls-pill">
            <label for="categorySelect">Subject</label>
            <select id="categorySelect">
              <option value="mix">Mix</option>
              <option value="math">Math</option>
              <option value="science">Science</option>
              <option value="indo">Bahasa Indo</option>
            </select>
          </div>

          <div class="controls-pill">
            <label for="questionCountSelect">Questions</label>
            <select id="questionCountSelect">
              <option value="5">5 (Quick)</option>
              <option value="10" selected>10 (Standard)</option>
              <option value="15">15 (Challenge)</option>
            </select>
          </div>
        </section>

        <!-- CONTENT AREA -->
        <section id="contentArea">
          <div class="empty-state" id="emptyState">
            <div class="empty-state-icon">‚ú®</div>
            <div>
              <strong>Pray before you start.</strong><br />
              Pilih subject & jumlah soal, lalu tekan tombol
              <strong>Start</strong> di kartu kuning di atas.
            </div>
          </div>

          <!-- QUIZ CARD -->
          <section class="quiz-card" id="quizCard" style="display:none;">
            <div class="quiz-header">
              <div class="quiz-header-left">
                <div class="tag-row">
                  <span id="categoryTag" class="category">Math</span>
                  <span id="questionTag">Question 1 of 10</span>
                </div>
                <h2 id="quizTitle">Kerjakan soal berikut dengan teliti ya, Ubaid! üí™</h2>
              </div>
              <div class="score-pill">
                <span class="icon">‚≠ê</span>
                <span>Score: <span id="scoreDisplay">0</span></span>
              </div>
            </div>

            <div class="progress-wrapper">
              <div class="progress-label-row">
                <span id="progressLabel">0% complete</span>
                <span id="answeredLabel">0 answered</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
              </div>
            </div>

            <div class="question-text" id="questionText"></div>
 
            <div class="question-image" id="questionImageContainer"></div>

            <div class="options" id="optionsContainer"></div>

            <div class="input-answer-row" id="inputContainer">
              <input
                type="text"
                id="answerInput"
                placeholder="Ketik jawabanmu di sini..."
                autocomplete="off"
              />
              <button id="checkInputBtn">Check ‚úÖ</button>
            </div>

            <div class="feedback-row">
              <div class="feedback" id="feedback"></div>
              <div class="bottom-actions">
                <button class="secondary outline" id="skipBtn">Skip ‚è≠Ô∏è</button>
                <button class="secondary" id="nextBtn" disabled>Next Question ‚ûú</button>
              </div>
            </div>
          </section>

          <!-- RESULT CARD -->
          <section class="result-card" id="resultCard" style="display:none;">
            <div class="result-header">
              <div class="result-main">
                <h2>
                  <span class="icon" id="emojiResult">üèÜ</span>
                  <span id="resultTitle">Keren, Ubaid!</span>
                </h2>
                <p id="resultMessage">
                  Kamu sudah menyelesaikan semua soal. Lihat skor dan ulangi kalau mau naik level lagi.
                </p>
              </div>
              <div class="result-score">
                Total Score<br />
                <strong><span id="resultScore">0</span></strong>
                <span style="font-size:12px;">/ <span id="resultMaxScore">10</span></span>
              </div>
            </div>

            <div class="result-details">
              <div class="chip">
                <span class="icon">‚úÖ</span>
                Benar:
                <span id="resultCorrect">0</span>
              </div>
              <div class="chip">
                <span class="icon">‚ùå</span>
                Salah:
                <span id="resultWrong">0</span>
              </div>
              <div class="chip">
                <span class="icon">‚è≠Ô∏è</span>
                Dilewati:
                <span id="resultSkipped">0</span>
              </div>
              <div class="chip">
                <span class="icon">üìä</span>
                Persentase:
                <span id="resultPercent">0%</span>
              </div>
            </div>

            <div class="result-actions">
              <button class="secondary outline" id="backToStartBtn">
                üîÅ Kembali ke Daily Challenge
              </button>
              <button class="secondary" id="retryBtn">
                üîÑ Ulangi sesi ini
              </button>
            </div>
          </section>
        </section>
      </section>
    </main>
  </div>

  <script>
    // ==============================
    // BANK SOAL
    // type: "choice" = pilihan ganda
    // type: "input"  = jawaban diketik
    // ==============================
    const questionBank = {
      math: [
        {
          type: "choice",
          question: "Hasil dari 3/4 + 2/4 adalah ...",
          options: ["4/4", "5/4", "6/4", "1/4"],
          answerIndex: 1,
          explanation: "3/4 + 2/4 = (3+2)/4 = 5/4."
        },
        {
          type: "choice",
          question: "Sebuah persegi mempunyai sisi 8 cm. Keliling persegi adalah ...",
          options: ["16 cm", "24 cm", "32 cm", "64 cm"],
          answerIndex: 2,
          explanation: "Keliling persegi = 4 √ó sisi = 4 √ó 8 = 32 cm."
        },
        {
          type: "choice",
          question: "Bilangan prima berikut yang merupakan bilangan prima terbesar kurang dari 20 adalah ...",
          options: ["17", "18", "19", "20"],
          answerIndex: 2,
          explanation: "Bilangan prima kurang dari 20 adalah 2,3,5,7,11,13,17,19. Yang terbesar adalah 19."
        },
        {
          type: "choice",
          question: "Hasil dari 25 √ó 4 : 5 adalah ...",
          options: ["5", "10", "15", "20"],
          answerIndex: 3,
          explanation: "25 √ó 4 = 100, lalu 100 : 5 = 20. Jadi jawabannya 20."
        },
        {
          type: "choice",
          question: "Pecahan yang senilai dengan 2/3 adalah ...",
          options: ["4/9", "6/9", "8/15", "10/18"],
          answerIndex: 1,
          explanation: "2/3 = (2√ó3)/(3√ó3) = 6/9, jadi 6/9 senilai dengan 2/3."
        },
        {
          type: "input",
          question: "Hasil dari 250 : 5 adalah ...",
          correctAnswers: ["50"],
          explanation: "250 dibagi 5 = 50."
        },
        {
          type: "input",
          question: "Sebuah persegi panjang memiliki panjang 12 cm dan lebar 5 cm. Luasnya adalah ... cm¬≤",
          correctAnswers: ["60", "60 cm2", "60 cm¬≤"],
          explanation: "Luas = p √ó l = 12 √ó 5 = 60 cm¬≤."
        }
      ],
      science: [
        {
          type: "choice",
          question: "In which body system is the heart found?",
          options: ["breathing system", "circulatory system", "respiratory system", "skeletal system"],
          answerIndex: 2,
          explanation: "Akar menyerap air dan mineral dari tanah."
        },
        {
          type: "choice",
          question: "What is the main reason that humans need a heart?",
          options: ["to use oxygen in a chemical reaction", "to remove waste gases", "to pump blood around the body", "to ventilate the lungs"],
          answerIndex: 1,
          explanation: "Air yang menjadi uap air disebut menguap (evaporasi)."
        },
{
  type: "choice",
  question: "Which are the correct names of the organs labelled X and Y in the diagram?",
  image: "https://raw.githubusercontent.com/andyandriadoria/UbaidBits/main/Picture2.png",
  options: [
    "X: Left lung, Y: Right lung",
    "X: Right lung, Y: Left lung",
    "X: Heart, Y: Right lung",
    "X: Trachea, Y: Left lung"
  ],
  answerIndex: 0,
  explanation: "X is the left lung, Y is the right lung."
},

        {
          type: "choice",
          question: "Benda yang dapat ditarik paling kuat oleh magnet adalah ...",
          options: ["Plastik", "Kertas", "Besi", "Kaca"],
          answerIndex: 2,
          explanation: "Besi termasuk bahan feromagnetik yang kuat ditarik magnet."
        },
        {
          type: "choice",
          question: "Matahari terbit dari arah ... dan tenggelam di arah ...",
          options: ["Barat - Timur", "Timur - Barat", "Utara - Selatan", "Selatan - Utara"],
          answerIndex: 1,
          explanation: "Matahari terbit di Timur dan tenggelam di Barat."
        },
        {
          type: "input",
          question: "Sebutkan wujud air pada suhu di atas 100¬∞C (tulis satu kata saja)!",
          correctAnswers: ["uap", "gas", "uap air"],
          explanation: "Pada suhu di atas 100¬∞C, air berwujud gas (uap air)."
        }
      ],
      indo: [
        {
          type: "choice",
          question: "Kalimat berikut yang menggunakan tanda baca koma dengan benar adalah ...",
          options: [
            "Ibu membeli apel, jeruk dan mangga.",
            "Ibu membeli apel jeruk, dan mangga.",
            "Ibu membeli apel, jeruk, dan mangga.",
            "Ibu, membeli apel jeruk dan mangga."
          ],
          answerIndex: 2,
          explanation: "Pada deret, tanda koma dipakai di antara unsur-unsur seperti 'apel, jeruk, dan mangga'."
        },
        {
          type: "choice",
          question: "Antonim dari kata 'tinggi' adalah ...",
          options: ["Panjang", "Kuat", "Rendah", "Lurus"],
          answerIndex: 2,
          explanation: "Lawan kata 'tinggi' adalah 'rendah'."
        },
        {
          type: "choice",
          question: "Kalimat yang menggunakan huruf kapital dengan benar adalah ...",
          options: [
            "Kami berlibur ke kota bandung.",
            "Ayah bekerja di Bank mandiri.",
            "Pada hari Minggu kami ke pantai.",
            "Dia tinggal di jalan melati."
          ],
          answerIndex: 2,
          explanation: "Nama hari ditulis dengan huruf kapital: 'hari Minggu'."
        },
        {
          type: "choice",
          question: "Kalimat perintah yang benar adalah ...",
          options: [
            "Bolehkah saya ikut?",
            "Tolong tutup pintunya!",
            "Saya ingin makan sekarang.",
            "Dia sedang belajar."
          ],
          answerIndex: 1,
          explanation: "Kalimat perintah biasanya memakai kata kerja perintah, contoh: 'Tolong tutup pintunya!'"
        },
        {
          type: "choice",
          question: "Kata tanya yang tepat untuk menanyakan 'alasan' adalah ...",
          options: ["Apa", "Siapa", "Di mana", "Mengapa"],
          answerIndex: 3,
          explanation: "Untuk menanyakan alasan digunakan kata tanya 'mengapa'."
        },
        {
          type: "input",
          question: "Kata dasar dari 'berlari' adalah ...",
          correctAnswers: ["lari"],
          explanation: "Bentuk dasar 'berlari' adalah 'lari'."
        }
      ]
    };

    function getMixedQuestions() {
      return [
        ...questionBank.math,
        ...questionBank.science,
        ...questionBank.indo
      ];
    }

    // ==============================
    // STATE & ELEMENTS
    // ==============================
    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let answeredCount = 0;
    let skippedCount = 0;
    let isQuestionLocked = false;

    const categorySelect = document.getElementById("categorySelect");
    const questionCountSelect = document.getElementById("questionCountSelect");
    const startBtn = document.getElementById("startBtn");

    const emptyState = document.getElementById("emptyState");
    const quizCard = document.getElementById("quizCard");
    const resultCard = document.getElementById("resultCard");

    const categoryTag = document.getElementById("categoryTag");
    const questionTag = document.getElementById("questionTag");
    const quizTitle = document.getElementById("quizTitle");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const topScore = document.getElementById("topScore");

    const progressFill = document.getElementById("progressFill");
    const progressLabel = document.getElementById("progressLabel");
    const answeredLabel = document.getElementById("answeredLabel");

    const questionText = document.getElementById("questionText");
    const optionsContainer = document.getElementById("optionsContainer");
    const questionImageContainer = document.getElementById("questionImageContainer");
    const inputContainer = document.getElementById("inputContainer");
    const answerInput = document.getElementById("answerInput");
    const checkInputBtn = document.getElementById("checkInputBtn");
    const feedback = document.getElementById("feedback");

    const nextBtn = document.getElementById("nextBtn");
    const skipBtn = document.getElementById("skipBtn");

    const emojiResult = document.getElementById("emojiResult");
    const resultTitle = document.getElementById("resultTitle");
    const resultMessage = document.getElementById("resultMessage");
    const resultScore = document.getElementById("resultScore");
    const resultMaxScore = document.getElementById("resultMaxScore");
    const resultCorrect = document.getElementById("resultCorrect");
    const resultWrong = document.getElementById("resultWrong");
    const resultSkipped = document.getElementById("resultSkipped");
    const resultPercent = document.getElementById("resultPercent");

    const backToStartBtn = document.getElementById("backToStartBtn");
    const retryBtn = document.getElementById("retryBtn");

    // Helper
    function shuffleArray(arr) {
      const copy = [...arr];
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function getCategoryLabel(cat) {
      switch (cat) {
        case "math": return "Math";
        case "science": return "Science";
        case "indo": return "Bahasa Indo";
        case "mix": return "Mix";
        default: return "Latihan";
      }
    }

    function startQuiz() {
      const cat = categorySelect.value;
      const count = parseInt(questionCountSelect.value, 10);

      let questions;
      if (cat === "mix") {
        questions = getMixedQuestions();
      } else {
        questions = questionBank[cat] || [];
      }

      if (!questions.length) {
        alert("Belum ada soal untuk kategori ini.");
        return;
      }

      const shuffled = shuffleArray(questions);
      currentQuestions = shuffled.slice(0, Math.min(count, shuffled.length));

      currentIndex = 0;
      score = 0;
      answeredCount = 0;
      skippedCount = 0;
      isQuestionLocked = false;

      scoreDisplay.textContent = "0";
      topScore.textContent = "0 XP";
      feedback.textContent = "";
      feedback.className = "feedback";
      nextBtn.disabled = true;

      emptyState.style.display = "none";
      quizCard.style.display = "block";
      resultCard.style.display = "none";

      categoryTag.textContent = getCategoryLabel(cat);

      updateProgress();
      renderQuestion();
    }

    function updateProgress() {
      const total = currentQuestions.length;
      const done = answeredCount + skippedCount;
      const percent = total > 0 ? (done / total) * 100 : 0;

      progressFill.style.width = percent + "%";
      progressLabel.textContent = Math.round(percent) + "% complete";
      answeredLabel.textContent = answeredCount + " answered";
      questionTag.textContent = "Question " + (currentIndex + 1) + " of " + total;

      quizTitle.textContent =
        currentIndex === 0
          ? "Kerjakan soal berikut dengan teliti ya, Ubaid! üí™"
          : "Mantap, lanjut lagi! üöÄ";
    }

function renderQuestion() {
  const q = currentQuestions[currentIndex];
  if (!q) return;

  const type = q.type || "choice";

  isQuestionLocked = false;
  feedback.textContent = "";
  feedback.className = "feedback";
  nextBtn.disabled = true;

  questionText.textContent = q.question;

  // --- Gambar soal ---
  if (q.image) {
    questionImageContainer.innerHTML =
      `<img src="${q.image}" alt="Gambar soal" />`;
    questionImageContainer.style.display = "block";
  } else {
    questionImageContainer.innerHTML = "";
    questionImageContainer.style.display = "none";
  }
  // -------------------

  optionsContainer.innerHTML = "";
  optionsContainer.style.display = "none";
  inputContainer.style.display = "none";

  if (type === "choice") {
    renderChoiceQuestion(q);
  } else if (type === "input") {
    renderInputQuestion(q);
  }
}

    function renderChoiceQuestion(q) {
      optionsContainer.style.display = "flex";

      const labels = ["A", "B", "C", "D", "E", "F"];

      q.options.forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.innerHTML = `
          <span class="option-label">${labels[index] || "?"}</span>
          <span class="option-text">${opt}</span>
        `;
        btn.addEventListener("click", () => handleOptionClick(index));
        optionsContainer.appendChild(btn);
      });
    }

    function renderInputQuestion() {
      inputContainer.style.display = "flex";
      answerInput.value = "";
      answerInput.disabled = false;
      checkInputBtn.disabled = false;
      answerInput.focus();
    }

    function handleOptionClick(selectedIndex) {
      if (isQuestionLocked) return;

      const currentQuestion = currentQuestions[currentIndex];
      const optionButtons = Array.from(
        document.querySelectorAll(".option-btn")
      );

      isQuestionLocked = true;
      answeredCount++;

      optionButtons.forEach((btn, idx) => {
        btn.disabled = true;
        if (idx === currentQuestion.answerIndex) {
          btn.classList.add("correct");
        }
        if (idx === selectedIndex && selectedIndex !== currentQuestion.answerIndex) {
          btn.classList.add("wrong");
        }
      });

      if (selectedIndex === currentQuestion.answerIndex) {
        score += 10;
        scoreDisplay.textContent = score;
        topScore.textContent = score + " XP";
        feedback.textContent = "Benar! " + (currentQuestion.explanation || "");
        feedback.className = "feedback correct";
      } else {
        feedback.textContent =
          "Belum tepat. " +
          (currentQuestion.explanation
            ? "Penjelasan: " + currentQuestion.explanation
            : "");
        feedback.className = "feedback wrong";
      }

      updateProgress();
      nextBtn.disabled = false;
      nextBtn.textContent =
        currentIndex === currentQuestions.length - 1
          ? "Lihat Hasil üèÅ"
          : "Berikutnya ‚ûú";
    }

    function handleInputSubmit() {
      if (isQuestionLocked) return;

      const q = currentQuestions[currentIndex];
      if ((q.type || "choice") !== "input") return;

      let userAnswer = answerInput.value.trim();
      if (!userAnswer) {
        feedback.textContent = "Tulis dulu jawabannya, ya üòä";
        feedback.className = "feedback wrong";
        return;
      }

      const normalize = (str) => str.toString().trim().toLowerCase();

      const normalizedUser = normalize(userAnswer);
      let correctAnswers = [];

      if (Array.isArray(q.correctAnswers)) {
        correctAnswers = q.correctAnswers;
      } else if (
        typeof q.correctAnswers === "string" ||
        typeof q.correctAnswers === "number"
      ) {
        correctAnswers = [q.correctAnswers];
      }

      const isCorrect = correctAnswers.some(
        (ans) => normalize(ans) === normalizedUser
      );

      isQuestionLocked = true;
      answeredCount++;

      answerInput.disabled = true;
      checkInputBtn.disabled = true;

      if (isCorrect) {
        score += 10;
        scoreDisplay.textContent = score;
        topScore.textContent = score + " XP";
        feedback.textContent = "Benar! " + (q.explanation || "");
        feedback.className = "feedback correct";
      } else {
        const correctShow = correctAnswers[0] ?? "";
        feedback.textContent =
          "Belum tepat. " +
          (correctShow ? "Jawaban benar: " + correctShow + ". " : "") +
          (q.explanation || "");
        feedback.className = "feedback wrong";
      }

      updateProgress();
      nextBtn.disabled = false;
      nextBtn.textContent =
        currentIndex === currentQuestions.length - 1
          ? "Lihat Hasil üèÅ"
          : "Berikutnya ‚ûú";
    }

    function goToNextQuestion() {
      if (currentIndex >= currentQuestions.length - 1) {
        showResult();
        return;
      }
      currentIndex++;
      updateProgress();
      renderQuestion();
    }

    function skipQuestion() {
      if (isQuestionLocked) {
        goToNextQuestion();
        return;
      }
      skippedCount++;

      if (currentIndex >= currentQuestions.length - 1) {
        showResult();
      } else {
        currentIndex++;
        updateProgress();
        renderQuestion();
      }
    }

    function showResult() {
      quizCard.style.display = "none";
      resultCard.style.display = "block";

      const totalQuestions = currentQuestions.length;
      const correctCount = score / 10;
      const wrongCount = totalQuestions - correctCount - skippedCount;
      const percent =
        totalQuestions > 0
          ? Math.round((correctCount / totalQuestions) * 100)
          : 0;

      resultScore.textContent = score;
      resultMaxScore.textContent = totalQuestions * 10;
      resultCorrect.textContent = correctCount;
      resultWrong.textContent = wrongCount;
      resultSkipped.textContent = skippedCount;
      resultPercent.textContent = percent + "%";

      if (percent === 100) {
        emojiResult.textContent = "üåü";
        resultTitle.textContent = "Perfect! Juara banget, Ubaid! üî•";
        resultMessage.textContent =
          "Semua soal benar! Ulangi atau naikkan jumlah soalnya untuk tantangan baru.";
      } else if (percent >= 80) {
        emojiResult.textContent = "üèÜ";
        resultTitle.textContent = "Keren! Tinggal sedikit lagi! üí™";
        resultMessage.textContent =
          "Nilaimu sudah tinggi. Coba cari tahu soal-soal yang masih salah, ya.";
      } else if (percent >= 50) {
        emojiResult.textContent = "üöÄ";
        resultTitle.textContent = "Lumayan, kita push lagi!";
        resultMessage.textContent =
          "Belajar itu pelan-pelan tapi rutin. Ulangi sesi ini supaya makin kuat.";
      } else {
        emojiResult.textContent = "üå±";
        resultTitle.textContent = "Ayo kita mulai dari dasar lagi üòâ";
        resultMessage.textContent =
          "Tidak apa-apa kalau masih banyak salah. Kita bisa mulai dari materi mudah dulu.";
      }
    }

    function resetToStart() {
      quizCard.style.display = "none";
      resultCard.style.display = "none";
      emptyState.style.display = "flex";
    }

    function retrySameQuiz() {
      if (!currentQuestions || !currentQuestions.length) {
        resetToStart();
        return;
      }

      currentQuestions = shuffleArray(currentQuestions);
      currentIndex = 0;
      score = 0;
      answeredCount = 0;
      skippedCount = 0;
      isQuestionLocked = false;

      scoreDisplay.textContent = "0";
      topScore.textContent = "0 XP";
      feedback.textContent = "";
      feedback.className = "feedback";
      nextBtn.disabled = true;

      resultCard.style.display = "none";
      quizCard.style.display = "block";

      updateProgress();
      renderQuestion();
    }

    // Event listeners
    startBtn.addEventListener("click", startQuiz);
    nextBtn.addEventListener("click", goToNextQuestion);
    skipBtn.addEventListener("click", skipQuestion);
    backToStartBtn.addEventListener("click", resetToStart);
    retryBtn.addEventListener("click", retrySameQuiz);
    checkInputBtn.addEventListener("click", handleInputSubmit);
    answerInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        e.preventDefault();
        handleInputSubmit();
      }
    });
  </script>
</body>
</html>
